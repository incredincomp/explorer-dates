var h=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var L=h((exports,module)=>{var vscode=require("vscode"),isWebRuntime=process.env.VSCODE_WEB==="true",inspectValue=isWebRuntime?r=>{if(typeof r=="string")return r;try{return JSON.stringify(r,null,2)}catch{return"<<unable to serialize log arg>>"}}:eval("require")("util").inspect,DEFAULT_LOG_PROFILE="default",SUPPORTED_PROFILES=new Set(["default","stress","soak"]),LOG_LEVEL_ORDER=["debug","info","warn","error"],DEFAULT_CONSOLE_LEVEL="warn",Logger=class{constructor(){this.s=vscode.window.createOutputChannel("Explorer Dates"),this.D=!1,this.E=null,this.p=(process.env.EXPLORER_DATES_LOG_PROFILE||DEFAULT_LOG_PROFILE).toLowerCase(),SUPPORTED_PROFILES.has(this.p)||(this.p=DEFAULT_LOG_PROFILE),this.h=new Map,this.A=DEFAULT_CONSOLE_LEVEL,this.T(),this.E=vscode.workspace.onDidChangeConfiguration(e=>{(e.affectsConfiguration("explorerDates.enableLogging")||e.affectsConfiguration("explorerDates.consoleLogLevel"))&&this.T()})}T(){let e=vscode.workspace.getConfiguration("explorerDates");this.D=e.get("enableLogging",!1);let t=(e.get("consoleLogLevel",DEFAULT_CONSOLE_LEVEL)||"").toLowerCase();this.A=LOG_LEVEL_ORDER.includes(t)?t:DEFAULT_CONSOLE_LEVEL}setLogProfile(e=DEFAULT_LOG_PROFILE){let t=(e||DEFAULT_LOG_PROFILE).toLowerCase();this.p=SUPPORTED_PROFILES.has(t)?t:DEFAULT_LOG_PROFILE,this.resetThrottle()}resetThrottle(e){if(e){this.h.delete(e);return}this.h.clear()}debug(e,...t){this.D&&this.k("debug",null,e,t)}info(e,...t){this.k("info",null,e,t)}infoWithOptions(e,t,...n){this.k("info",e||null,t,n)}warn(e,...t){this.k("warn",null,e,t)}error(e,t,...n){let i=`[${new Date().toISOString()}] [ERROR] ${e}`;this.s.appendLine(i),t instanceof Error?(this.s.appendLine(`Error: ${t.message}`),t.stack&&this.s.appendLine(`Stack: ${t.stack}`)):t&&this.s.appendLine(this.C(t));let o=this.I(n);o.length>0&&o.forEach(a=>this.s.appendLine(this.C(a))),this.L("error",i,[t,...o])}show(){this.s.show()}clear(){this.s.clear()}dispose(){this.s.dispose(),this.E&&(this.E.dispose(),this.E=null);let e="__explorerDatesLogger";typeof global<"u"&&global[e]===this?global[e]=null:typeof globalThis<"u"&&globalThis[e]===this?globalThis[e]=null:typeof window<"u"&&window[e]===this&&(window[e]=null),loggerInstance===this&&(loggerInstance=null)}k(e,t,n,s){if(e==="debug"&&!this.D||this.q(e,t))return;let o=`[${new Date().toISOString()}] [${e.toUpperCase()}] ${n}`;this.s.appendLine(o);let a=this.I(s);a.length>0&&a.forEach(l=>this.s.appendLine(this.C(l))),this.L(e,o,a)}I(e){return!e||e.length===0?[]:e.map(t=>{if(typeof t!="function")return t;try{return t()}catch(n){return`<<log arg threw: ${n.message}>>`}})}C(e){try{return typeof e=="string"?e:typeof e=="object"?JSON.stringify(e,null,2):inspectValue(e)}catch(t){return`<<failed to serialize log arg: ${t.message}>>`}}q(e,t){if(e!=="info"||!t||!t.throttleKey)return!1;let n=(t.profile||"stress").toLowerCase();if(!this.Y(n))return!1;let s=Number(t.throttleLimit)||50,i=t.throttleKey,o=this.h.get(i)||{count:0,suppressed:0,noticeLogged:!1};if(o.count<s)return o.count+=1,this.h.set(i,o),!1;if(o.suppressed+=1,!o.noticeLogged){o.noticeLogged=!0;let a=`[${new Date().toISOString()}] [INFO] \u23F8\uFE0F Suppressing further logs for "${i}" after ${s} entries (profile=${this.p})`;this.s.appendLine(a),this.L("info",a)}return this.h.set(i,o),!0}Y(e){let t=this.p||DEFAULT_LOG_PROFILE;return e==="default"?t===DEFAULT_LOG_PROFILE:t===e}J(e){let t=LOG_LEVEL_ORDER.indexOf(this.A),n=LOG_LEVEL_ORDER.indexOf(e);return t===-1||n===-1?!1:n>=t}L(e,t,n=[]){if(!this.J(e))return;(e==="warn"?console.warn:e==="error"?console.error:console.log).call(console,t,...n)}},GLOBAL_LOGGER_KEY="__explorerDatesLogger";function getLogger(){return typeof global<"u"?(global[GLOBAL_LOGGER_KEY]||(global[GLOBAL_LOGGER_KEY]=new Logger),global[GLOBAL_LOGGER_KEY]):typeof globalThis<"u"?(globalThis[GLOBAL_LOGGER_KEY]||(globalThis[GLOBAL_LOGGER_KEY]=new Logger),globalThis[GLOBAL_LOGGER_KEY]):typeof window<"u"?(window[GLOBAL_LOGGER_KEY]||(window[GLOBAL_LOGGER_KEY]=new Logger),window[GLOBAL_LOGGER_KEY]):(loggerInstance||(loggerInstance=new Logger),loggerInstance)}var loggerInstance=null;module.exports={Logger,getLogger}});var S=h((ft,V)=>{function y(r=""){return r?r.replace(/\\/g,"/"):""}function Fe(r=""){let e=y(r);return e?e.split("/").filter(Boolean):[]}function H(r=""){let e=Fe(r);return e.length?e[e.length-1]:""}function Se(r=""){let e=H(r),t=e.lastIndexOf(".");return t<=0?"":e.substring(t).toLowerCase()}function _e(r=""){let e=y(r),t=e.lastIndexOf("/");return t===-1?"":e.substring(0,t)}function ve(...r){return y(r.filter(Boolean).join("/")).replace(/\/+/g,"/")}function Oe(r=""){return y(r).toLowerCase()}function Ae(r=""){if(!r)return"";if(typeof r=="string")return r;if(typeof r.fsPath=="string"&&r.fsPath.length>0)return r.fsPath;if(typeof r.path=="string"&&r.path.length>0)return r.path;if(typeof r.toString=="function")try{return r.toString(!0)}catch{return r.toString()}return String(r)}function Te(r="",e=""){let t=y(r),n=y(e);return t&&n.startsWith(t)?n.substring(t.length).replace(/^\/+/,""):n}V.exports={normalizePath:y,getFileName:H,getExtension:Se,getDirectory:_e,joinPath:ve,getCacheKey:Oe,getUriPath:Ae,getRelativePath:Te}});var P=h((dt,J)=>{function q(){return typeof performance<"u"&&performance.now&&performance.timeOrigin?Math.floor(performance.timeOrigin+performance.now()):typeof Date=="function"&&Date.now?Date.now():16409952e5}function Y(r){return!!(r&&typeof r=="object"&&typeof r.getTime=="function")}function C(r){if(!r||isNaN(r))return"Invalid Date";if(typeof Intl<"u"&&Intl.DateTimeFormat)try{return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(r)}catch{}let e=864e5,t=36e5,n=6e4,s=1e3,i=1970,o=4,a=Math.floor(r/e),l=r%e,u=Math.floor(l/t),m=Math.floor(l%t/n),k=Math.floor(l%n/s),x=i+Math.floor(a/365.25),D=Math.floor(a%365.25/30.44)+1,R=Math.floor(a%30.44)+1,j=String(Math.min(D,12)).padStart(2,"0"),xe=String(Math.min(R,31)).padStart(2,"0"),De=String(u).padStart(2,"0"),Ce=String(m).padStart(2,"0"),Le=String(k).padStart(2,"0");return`${j}/${xe}/${x}, ${De}:${Ce}:${Le}`}function Ie(r){if(Y(r))return r;let e=typeof Date=="function"&&Date.prototype&&Date.prototype.constructor===Date;if(r==null){if(!e){let t=q();return{getTime:()=>t,toLocaleString:()=>C(t),toString:()=>C(t)}}return new Date}if(typeof r=="number")return e?new Date(r):{getTime:()=>r,toLocaleString:()=>C(r),toString:()=>C(r)};if(typeof r=="string"){let t=0;if(e)t=Date.parse(r);else{let n=parseFloat(r);t=isNaN(n)?0:n}return e?new Date(r):{getTime:()=>t,toLocaleString:()=>C(t),toString:()=>C(t)}}return e?new Date(r):{getTime:()=>0,toLocaleString:()=>"Invalid Date",toString:()=>"Invalid Date"}}J.exports={ensureDate:Ie,isDateLike:Y,getCurrentTimestamp:q}});var X=h((pt,Z)=>{var c={onboarding:34,analysisCommands:23,exportReporting:17,extensionApi:15,workspaceTemplates:14,advancedCache:28,workspaceIntelligence:31,incrementalWorkers:19},w=99,b={minimal:{id:"minimal",name:"Minimal",description:"Core decorations only, smallest bundle (~99KB)",targetBundleSize:w,settings:{"explorerDates.enableOnboardingSystem":!1,"explorerDates.enableAnalysisCommands":!1,"explorerDates.enableExportReporting":!1,"explorerDates.enableExtensionApi":!1,"explorerDates.enableWorkspaceTemplates":!1,"explorerDates.enableAdvancedCache":!1,"explorerDates.enableWorkspaceIntelligence":!1,"explorerDates.enableIncrementalWorkers":!1,"explorerDates.showDateDecorations":!0,"explorerDates.dateDecorationFormat":"relative-short"},targetScenarios:["Resource-constrained environments","Basic file dates only","Large remote workspaces"]},balanced:{id:"balanced",name:"Balanced",description:"Essential features with optimization (~200KB)",targetBundleSize:w+c.onboarding+c.workspaceTemplates+c.advancedCache+c.analysisCommands,settings:{"explorerDates.enableOnboardingSystem":!0,"explorerDates.enableAnalysisCommands":!0,"explorerDates.enableExportReporting":!1,"explorerDates.enableExtensionApi":!1,"explorerDates.enableWorkspaceTemplates":!0,"explorerDates.enableAdvancedCache":!0,"explorerDates.enableWorkspaceIntelligence":!1,"explorerDates.enableIncrementalWorkers":!1,"explorerDates.performanceMode":!0,"explorerDates.smartFileWatching":!0},targetScenarios:["Most development workflows","Remote environments","Medium to large workspaces"]},"web-development":{id:"web-development",name:"Web Development",description:"Optimized for web projects (~240KB)",targetBundleSize:w+c.onboarding+c.analysisCommands+c.workspaceTemplates+c.advancedCache+c.incrementalWorkers,settings:{"explorerDates.enableOnboardingSystem":!0,"explorerDates.enableAnalysisCommands":!0,"explorerDates.enableExportReporting":!1,"explorerDates.enableExtensionApi":!1,"explorerDates.enableWorkspaceTemplates":!0,"explorerDates.enableAdvancedCache":!0,"explorerDates.enableWorkspaceIntelligence":!1,"explorerDates.enableIncrementalWorkers":!0,"explorerDates.showGitInfo":"author","explorerDates.colorScheme":"file-type"},targetScenarios:["JavaScript/TypeScript projects","Node.js development","Frontend frameworks"]},enterprise:{id:"enterprise",name:"Enterprise",description:"Full feature set with reporting and API (~380KB)",targetBundleSize:Object.values(c).reduce((r,e)=>r+e,w),settings:{"explorerDates.enableOnboardingSystem":!0,"explorerDates.enableAnalysisCommands":!0,"explorerDates.enableExportReporting":!0,"explorerDates.enableExtensionApi":!0,"explorerDates.enableWorkspaceTemplates":!0,"explorerDates.enableAdvancedCache":!0,"explorerDates.enableWorkspaceIntelligence":!0,"explorerDates.enableIncrementalWorkers":!0,"explorerDates.persistentCache":!0,"explorerDates.smartExclusions":!0},targetScenarios:["Team lead workflows","Analytics and reporting needs","API integration requirements","Full workspace intelligence"]},"data-science":{id:"data-science",name:"Data Science",description:"Optimized for data workflows (~280KB)",targetBundleSize:w+c.onboarding+c.analysisCommands+c.exportReporting+c.workspaceIntelligence+c.advancedCache,settings:{"explorerDates.enableOnboardingSystem":!0,"explorerDates.enableAnalysisCommands":!0,"explorerDates.enableExportReporting":!0,"explorerDates.enableExtensionApi":!1,"explorerDates.enableWorkspaceTemplates":!1,"explorerDates.enableAdvancedCache":!0,"explorerDates.enableWorkspaceIntelligence":!0,"explorerDates.enableIncrementalWorkers":!1,"explorerDates.dateDecorationFormat":"iso-detailed"},targetScenarios:["Jupyter notebooks","Python data analysis","Research workflows"]}},Re=new Set(["enableOnboardingSystem","enableAnalysisCommands","enableExportReporting","enableExtensionApi","enableWorkspaceTemplates","enableAdvancedCache","enableWorkspaceIntelligence","enableIncrementalWorkers","performanceMode","smartFileWatching"]);function Pe(r){let e=w;return r["explorerDates.enableOnboardingSystem"]&&(e+=c.onboarding),r["explorerDates.enableAnalysisCommands"]&&(e+=c.analysisCommands),r["explorerDates.enableExportReporting"]&&(e+=c.exportReporting),r["explorerDates.enableExtensionApi"]&&(e+=c.extensionApi),r["explorerDates.enableWorkspaceTemplates"]&&(e+=c.workspaceTemplates),r["explorerDates.enableAdvancedCache"]&&(e+=c.advancedCache),r["explorerDates.enableWorkspaceIntelligence"]&&(e+=c.workspaceIntelligence),r["explorerDates.enableIncrementalWorkers"]&&(e+=c.incrementalWorkers),e}function We(r){switch(r){case"minimal":case"extreme":return b.minimal;case"balanced":return b.balanced;case"web-development":return b["web-development"];case"data-science":return b["data-science"];case"enterprise":return b.enterprise;default:return b.balanced}}Z.exports={PRESET_DEFINITIONS:b,CHUNK_SIZES:c,BASE_BUNDLE_SIZE:w,RESTART_REQUIRED_SETTINGS:Re,calculateBundleSize:Pe,getDefaultPresetForProfile:We}});var ee=h((ht,Q)=>{var _={onboarding:"src/chunks/onboarding-chunk",onboardingAssets:"src/chunks/onboarding-assets-chunk",reporting:"src/chunks/reporting-chunk",templates:"src/chunks/templates-chunk",analysis:"src/chunks/analysis-chunk",diagnostics:"src/chunks/diagnostics-chunk",extensionApi:"src/chunks/extension-api-chunk",advancedCache:"src/chunks/advancedCache-chunk",batchProcessor:"src/chunks/batchProcessor-chunk",workspaceIntelligence:"src/chunks/workspaceIntelligence",incrementalWorkers:"src/chunks/incrementalWorkers",uiAdapters:"src/chunks/ui-adapters",gitInsights:"src/chunks/gitInsights-chunk",smartWatcherFallback:"src/chunks/smartWatcherFallback-chunk"};function Me(r){return _[r]||null}function Ne(){return Object.keys(_)}function Ue(r){let e={};for(let[t,n]of Object.entries(_))e[t]=()=>r(`./${n}`);return e}Q.exports={CHUNK_MAP:_,getChunkSourcePath:Me,getAllChunkNames:Ne,generateDevLoaderMap:Ue}});var te=h((exports,module)=>{var{getLogger}=L(),{CHUNK_SIZES}=X(),{getChunkSourcePath,getAllChunkNames}=ee(),featureLogger=null,DEFAULT_CHUNK_TIMEOUT_MS=Number(process.env.EXPLORER_DATES_CHUNK_TIMEOUT||5e3),NETWORK_ERROR_CODES=new Set(["ENOTFOUND","ECONNRESET","ECONNREFUSED","EAI_AGAIN","ETIMEDOUT","EHOSTUNREACH"]),BUILT_CHUNK_CACHE=new Map,CHUNK_METHOD_ALIASES={reporting:"exportReporting",templates:"workspaceTemplates",analysis:"analysisCommands"},DEV_CHUNK_PATH_CACHE=new Map;function getDevChunkImportPath(r){if(DEV_CHUNK_PATH_CACHE.has(r))return DEV_CHUNK_PATH_CACHE.get(r);let e=getChunkSourcePath(r);if(!e)return DEV_CHUNK_PATH_CACHE.set(r,null),null;let t=e;return t.startsWith("src/")&&(t=t.slice(4)),t.startsWith("./")||(t=`./${t}`),DEV_CHUNK_PATH_CACHE.set(r,t),t}function resolveNodeDependencies(){if(nativeDepsResolved)return!!(nativePath&&nativeFs);if(nativeDepsResolved=!0,!isNodeLikeRuntime())return!1;try{nativePath=eval("require")("path"),nativeFs=eval("require")("fs")}catch{nativePath=null,nativeFs=null}return!!(nativePath&&nativeFs)}var nativeDepsResolved=!1,nativePath=null,nativeFs=null;function isWebRuntime(){try{return typeof navigator<"u"&&navigator?.userAgent?navigator.userAgent.includes("vscode-web")||navigator.userAgent.includes("Code - Web"):typeof process<"u"&&process?.env?.VSCODE_WEB==="true"}catch{return!1}}function isNodeLikeRuntime(){return typeof process<"u"&&!!process.versions?.node&&!isWebRuntime()}function getChunkTimeoutMs(){return DEFAULT_CHUNK_TIMEOUT_MS>0?DEFAULT_CHUNK_TIMEOUT_MS:0}function logFeature(r,e,t){featureLogger||(featureLogger=getLogger());let n=featureLogger;typeof n[r]=="function"?n[r](e,t):n.info(e,t)}function logFeatureDisabled(r,e){logFeature("info","Feature disabled via configuration",{feature:r,savedKB:e&&CHUNK_SIZES[e]!==void 0?CHUNK_SIZES[e]:void 0})}function isLikelyNetworkIssue(r){if(!r)return!1;if(r.code&&NETWORK_ERROR_CODES.has(r.code))return!0;let e=(r.message||"").toLowerCase();return e.includes("network")||e.includes("fetch")||e.includes("timed out")}function runWithChunkTimeout(r,e){let t=getChunkTimeoutMs(),n=()=>{try{return Promise.resolve(r())}catch(s){return Promise.reject(s)}};return t?new Promise((s,i)=>{let o=!1,a=setTimeout(()=>{if(o)return;o=!0;let l=new Error(`Chunk "${e}" load timed out after ${t}ms`);l.code="CHUNK_TIMEOUT",i(l)},t);n().then(l=>{o||(o=!0,clearTimeout(a),s(l))}).catch(l=>{o||(o=!0,clearTimeout(a),i(l))})}):n()}function logResolverFailure(r,e){if(!e)return;let t={chunkName:r,error:e.message,code:e.code,networkIssue:isLikelyNetworkIssue(e),timedOut:e.code==="CHUNK_TIMEOUT"},n=t.networkIssue||t.timedOut?"warn":"error";logFeature(n,"Chunk resolver failed",t)}function tryLoadBuiltChunk(r){if(!r||!resolveNodeDependencies()||typeof nativeFs?.existsSync!="function")return null;if(BUILT_CHUNK_CACHE.has(r))return BUILT_CHUNK_CACHE.get(r);let e=[];typeof __dirname=="string"&&nativePath&&(e.push(nativePath.join(__dirname,"chunks",`${r}.js`)),e.push(nativePath.join(__dirname,"..","dist","chunks",`${r}.js`)));for(let t of e)try{if(!t||!nativeFs.existsSync(t))continue;let n=require(t),s=n?.default||n;return BUILT_CHUNK_CACHE.set(r,s||null),s&&logFeature("info","Loaded chunk via built artifact fallback",{chunkName:r,path:t}),s}catch(n){logFeature("warn","Built chunk fallback failed",{chunkName:r,path:t,error:n.message})}return BUILT_CHUNK_CACHE.set(r,null),null}function tryRequireDevChunk(r){if(isWebRuntime())return null;let e=getDevChunkImportPath(r);if(!e)return null;try{let t=require(e);return t?.default||t}catch(t){(t.code!=="MODULE_NOT_FOUND"||typeof t.message=="string"&&!t.message.includes(e))&&logFeature("debug","Dev chunk require failed",{chunkName:r,importPath:e,error:t.message})}return null}function tryRequireLocalBuiltChunk(r){if(isWebRuntime())return null;let e=`./chunks/${r}`;try{let t=require(e);return t?.default||t}catch(t){t.code==="MODULE_NOT_FOUND"||logFeature("debug","Local chunk require failed",{chunkName:r,importPath:e,error:t.message})}return null}function getSavingsKey(r){return r in CHUNK_SIZES?r:CHUNK_METHOD_ALIASES[r]||null}function announceChunkSavings(r){let e=getSavingsKey(r);if(!e)return;let t=CHUNK_SIZES[e];if(!t)return;let s=`\u{1F4BE} ${e===r||!r?e:`${e} (requested as "${r}")`} chunk unavailable - keeping the feature disabled is saving ~${t}KB`;logFeature("info","Chunk savings applied",{chunkName:e,requestedName:r,savedKB:t})}var getFeatureConfig=()=>{try{let e=require("vscode").workspace.getConfiguration("explorerDates");return{enableOnboarding:e.get("enableOnboardingSystem",!0),enableExportReporting:e.get("enableExportReporting",!0),enableWorkspaceTemplates:e.get("enableWorkspaceTemplates",!0),enableAnalysisCommands:e.get("enableAnalysisCommands",!0),enableAdvancedCache:e.get("enableAdvancedCache",!0),enableWorkspaceIntelligence:e.get("enableWorkspaceIntelligence",!0),enableIncrementalWorkers:e.get("enableIncrementalWorkers",!1),enableExtensionApi:e.get("enableExtensionApi",!0)}}catch{return{enableOnboarding:!0,enableExportReporting:!0,enableWorkspaceTemplates:!0,enableAnalysisCommands:!0,enableAdvancedCache:!0,enableWorkspaceIntelligence:!0,enableIncrementalWorkers:!1,enableExtensionApi:!0}}},featureLoaders=new Map,chunkResolver=null;function setFeatureChunkResolver(r){if(r&&typeof r!="function")throw new Error("Feature chunk resolver must be a function");chunkResolver=r||null}function registerFeatureLoader(r,e){if(typeof e!="function")throw new Error(`Feature loader for "${r}" must be a function`);featureLoaders.set(r,e)}function unregisterFeatureLoader(r){featureLoaders.delete(r)}function clearFeatureLoaders(){featureLoaders.clear()}async function loadFeatureModule(r){let e=featureLoaders.get(r);if(!e&&chunkResolver&&(e=()=>chunkResolver(r)),!e)return logFeature("warn","No loader registered for feature",{feature:r}),null;try{return await runWithChunkTimeout(()=>e(),r)}catch(t){return logFeature("warn","Feature loader failed",{feature:r,error:t.message,code:t.code,networkIssue:isLikelyNetworkIssue(t)}),announceChunkSavings(r),null}}function registerDefaultLoaders(){getAllChunkNames().forEach(e=>{featureLoaders.has(e)||registerFeatureLoader(e,createDefaultLoader(e))})}function createDefaultLoader(r){return async()=>{if(chunkResolver&&typeof chunkResolver=="function")try{let s=await runWithChunkTimeout(()=>chunkResolver(r),r);if(s)return s;logFeature("info","Chunk resolver returned no module",{chunkName:r})}catch(s){logResolverFailure(r,s)}let e=tryRequireDevChunk(r);if(e)return e;let t=tryRequireLocalBuiltChunk(r);if(t)return t;let n=tryLoadBuiltChunk(r);return n||(logFeature("warn","No built artifact available for chunk",{chunkName:r}),null)}}var featureFlags={async onboarding(){return getFeatureConfig().enableOnboarding?loadFeatureModule("onboarding"):(logFeatureDisabled("onboarding","onboarding"),null)},async exportReporting(){return getFeatureConfig().enableExportReporting?loadFeatureModule("reporting"):(logFeatureDisabled("exportReporting","exportReporting"),null)},async workspaceTemplates(){return getFeatureConfig().enableWorkspaceTemplates?loadFeatureModule("templates"):(logFeatureDisabled("workspaceTemplates","workspaceTemplates"),null)},async analysisCommands(){return getFeatureConfig().enableAnalysisCommands?loadFeatureModule("analysis"):(logFeatureDisabled("analysisCommands","analysisCommands"),null)},async advancedCache(){return getFeatureConfig().enableAdvancedCache?loadFeatureModule("advancedCache"):(logFeatureDisabled("advancedCache","advancedCache"),null)},async workspaceIntelligence(){return getFeatureConfig().enableWorkspaceIntelligence?loadFeatureModule("workspaceIntelligence"):(logFeatureDisabled("workspaceIntelligence","workspaceIntelligence"),null)},async incrementalWorkers(){return getFeatureConfig().enableIncrementalWorkers?loadFeatureModule("incrementalWorkers"):(logFeatureDisabled("incrementalWorkers","incrementalWorkers"),null)},async extensionApi(){return getFeatureConfig().enableExtensionApi?loadFeatureModule("extensionApi"):(logFeatureDisabled("extensionApi","extensionApi"),null)},async uiAdapters(){return loadFeatureModule("uiAdapters")},async batchProcessor(){return loadFeatureModule("batchProcessor")},async gitInsights(){return loadFeatureModule("gitInsights")},isEnabled(r){let e=getFeatureConfig();return{onboarding:e.enableOnboarding,exportReporting:e.enableExportReporting,workspaceTemplates:e.enableWorkspaceTemplates,analysisCommands:e.enableAnalysisCommands,advancedCache:e.enableAdvancedCache,workspaceIntelligence:e.enableWorkspaceIntelligence,incrementalWorkers:e.enableIncrementalWorkers,extensionApi:e.enableExtensionApi}[r]??!0},getEnabledFeatures(){let r=getFeatureConfig(),e=[];return r.enableOnboarding&&e.push("onboarding"),r.enableExportReporting&&e.push("exportReporting"),r.enableWorkspaceTemplates&&e.push("workspaceTemplates"),r.enableAnalysisCommands&&e.push("analysisCommands"),r.enableAdvancedCache&&e.push("advancedCache"),r.enableWorkspaceIntelligence&&e.push("workspaceIntelligence"),r.enableIncrementalWorkers&&e.push("incrementalWorkers"),r.enableExtensionApi&&e.push("extensionApi"),e},calculateSavings(){let r=getFeatureConfig(),e=0;return r.enableOnboarding||(e+=34),r.enableExportReporting||(e+=17),r.enableExtensionApi||(e+=15),r.enableWorkspaceTemplates||(e+=14),r.enableWorkspaceIntelligence||(e+=12),r.enableAnalysisCommands||(e+=8),r.enableAdvancedCache||(e+=5),e}};for(let[r,e]of Object.entries(CHUNK_METHOD_ALIASES))!featureFlags[r]&&typeof featureFlags[e]=="function"&&(featureFlags[r]=(...t)=>featureFlags[e](...t));function calculateSavings(r){r||(r=getFeatureConfig());let e=267,t=0;r.enableOnboarding||(t+=34),r.enableExportReporting||(t+=17),r.enableExtensionApi||(t+=15),r.enableWorkspaceTemplates||(t+=14),r.enableWorkspaceIntelligence||(t+=12),r.enableIncrementalWorkers||(t+=19),r.enableAnalysisCommands||(t+=8),r.enableAdvancedCache||(t+=5);let n=e-t,s=t>0?Math.round(t/e*100):0;return{baseSize:`${e}KB`,totalSavings:`${t}KB`,optimizedSize:`${n}KB`,percentage:s}}registerDefaultLoaders();module.exports={...featureFlags,getFeatureConfig,calculateSavings,registerFeatureLoader,setFeatureChunkResolver,unregisterFeatureLoader,clearFeatureLoaders,loadFeatureModule,registerDefaultLoaders}});var se=h((gt,ne)=>{var{getLogger:Ke}=L(),{normalizePath:v,getUriPath:W}=S(),{isDateLike:ze,ensureDate:re}=P(),M=class{constructor(e){this.F=e,this.e=Ke(),this.g=null,this.o=new Map,this.m=null,this.r=null,this.a=!1,this.f=null,this.x=new Set,this.y=new Map,this.i=null,this.Z=6e4}initialize(e={}){this.g=e.batchProcessor||null,this.a=e.enableProgressiveAnalysis||!1,this.m&&(this.m.dispose(),this.m=null),this.r&&(this.r.dispose(),this.r=null)}async startInitialIndex(e,t={}){if(!this.g||!Array.isArray(e)||e.length===0)return;this.R("restart"),this.f=new AbortController;let n=t.maxFiles||2e3;e.forEach(s=>{let i=this.g.processDirectoryProgressively(s.uri,async o=>this.P(o,{source:"initial"}),{background:!0,priority:"low",maxFiles:n,cancellationToken:this.f.signal});i&&this.x.add(i)}),this.e.info(`Incremental indexer scheduled initial scan for ${e.length} workspace folder(s).`)}R(e="unspecified"){if(this.f&&!this.f.signal.aborted&&this.f.abort(),this.f=null,this.g&&this.x.size)for(let t of this.x)this.g.cancelBatch(t);this.x.clear(),e!=="unspecified"&&this.e.debug(`Incremental indexer cancelled initial scan (${e})`)}async P(e,t={}){try{let n=await this.F.stat(e);await this.W(e,n,t)}catch(n){this.e.debug("Incremental indexer failed to stat URI",{error:n?.message,uri:e?.toString?.()})}}async W(e,t,n={}){let s=W(e);if(!s)return;let i=v(s);if(!i)return;let o={path:i,size:t?.size||0,mtimeMs:this.M(t?.mtime),birthtimeMs:this.M(t?.birthtime||t?.ctime||t?.mtime),indexedAt:Date.now(),digest:null,context:n};if(this.a||this.m){let a=this.m||await this.N();if(a?.isEnabled())try{let[l]=await a.runTask("digest",[o]);o.digest=l?.hash||null,o.sizeBucket=l?.sizeBucket,o.ageBucket=l?.ageBucket}catch(l){this.e.debug("Incremental index worker error",l)}}this.o.set(i,o)}getIndexedStat(e,t=this.Z){if(!e)return null;let n=v(e),s=this.o.get(n);return!s||Date.now()-(s.indexedAt||0)>t?null:{size:s.size||0,mtime:re(s.mtimeMs||Date.now()),birthtime:re(s.birthtimeMs||s.mtimeMs||Date.now()),isFile:()=>!0}}queueDelta(e,t="change"){if(!e)return;let n=e.toString();this.y.set(n,{uri:e,eventType:t}),this.i||(this.i=setTimeout(()=>this.X(),300))}async X(){this.i&&(clearTimeout(this.i),this.i=null);let e=Array.from(this.y.values());this.y.clear();for(let{uri:t,eventType:n}of e){if(n==="delete"){let s=v(W(t));s&&this.o.delete(s);continue}await this.P(t,{source:"delta",eventType:n})}}primeFromStat(e,t){!e||!t||this.W(e,t,{source:"prime"}).catch(n=>{this.e.debug("Failed to prime index from stat",n)})}async N(){if(!this.a)return null;if(!this.r)try{let{loadFeatureModule:e}=te(),t=await e("incrementalWorkers");if(t){let{IncrementalWorkersManager:n}=t;this.r=new n({logger:this.e}),await this.r.initialize(),this.e.info("\u{1F4E6} Incremental workers chunk loaded on demand (~8-10KB)")}else return this.e.warn("Failed to load incremental workers chunk"),null}catch(e){return this.e.error("Failed to load incremental workers manager",e),null}return this.r.getWorkerHost()}async enableProgressiveAnalysis(){return this.a||(this.a=!0,this.e.debug("Progressive analysis enabled, workers will be loaded on demand")),this.N()}disableProgressiveAnalysis(){this.a=!1,this.r&&(this.r.dispose(),this.r=null,this.e.debug("Progressive analysis disabled, worker resources disposed"))}getMetrics(){return{entries:this.o.size,workerEnabled:!!this.r?.isWorkerEnabled(),progressiveAnalysisEnabled:this.a,deltaQueue:this.y.size}}removeFoldersFromIndex(e=[]){if(!Array.isArray(e)||e.length===0)return 0;let t=e.map(s=>v(W(s))).filter(Boolean);if(!t.length)return 0;let n=0;for(let s of Array.from(this.o.keys()))t.some(i=>s===i||s.startsWith(`${i}/`))&&(this.o.delete(s),n++);return n>0&&this.e.debug(`Incremental indexer pruned ${n} entr${n===1?"y":"ies"} for removed workspace folder(s).`),n}M(e){if(!e)return Date.now();if(typeof e=="number")return e;if(ze(e))return e.getTime();if(typeof e=="string"){let t=Date.parse(e);return Number.isFinite(t)?t:Date.now()}return typeof e.getTime=="function"?e.getTime():Date.now()}dispose(){this.R("dispose"),this.i&&(clearTimeout(this.i),this.i=null),this.y.clear(),this.r&&(this.r.dispose(),this.r=null),this.o.clear()}};ne.exports={IncrementalIndexer:M}});var ae=h((mt,oe)=>{var ie=require("vscode");function Be(){try{return ie?.env?.uiKind===ie?.UIKind?.Web}catch{return!1}}oe.exports={isWebEnvironment:Be}});var ce=h((yt,le)=>{var N=class extends Error{constructor(e,t,n={}){super(t),this.code=e,this.context=n,this.name="ExtensionError"}},$e={FILE_PERMISSION_DENIED:"FILE_PERMISSION_DENIED",WORKSPACE_TOO_LARGE:"WORKSPACE_TOO_LARGE",CHUNK_LOAD_FAILED:"CHUNK_LOAD_FAILED"};function Ge(r){if(!r)return!1;let e=r.code||r?.name;return["EACCES","EPERM","EROFS","NoPermissions"].includes(e)}le.exports={ExtensionError:N,ERROR_CODES:$e,isPermissionError:Ge}});var de=h((bt,fe)=>{var f=require("vscode"),{isWebEnvironment:je}=ae(),{normalizePath:He}=S(),{ExtensionError:Ve,ERROR_CODES:qe,isPermissionError:Ye}=ce(),{ensureDate:U}=P(),ue=process.env.VSCODE_WEB==="true",Je=process.env.EXPLORER_DATES_FORCE_VSCODE_FS==="1",d=null;if(!ue&&!Je)try{d=require("fs").promises}catch{d=null}var O=class{constructor(){this.isWeb=ue||je()}l(e){if(!e)return"";if(typeof e=="string")return e;if(e&&typeof e=="object"&&typeof e.fsPath=="string")return e.fsPath;if(e&&typeof e=="object"&&typeof e.path=="string")return e.path;if(typeof e=="object"){if(typeof e.fsPath=="string")return e.fsPath;if(typeof e.path=="string")return e.path}return String(e)}c(e){if(e&&typeof e=="object"&&typeof e.scheme=="string"&&typeof e.path=="string")return e;if(typeof e=="string")return f.Uri.file(e);if(e&&typeof e=="object"){if(e.uri&&e.uri!==e)try{return this.c(e.uri)}catch{}if(typeof e.fsPath=="string"&&e.fsPath.length>0)return f.Uri.file(e.fsPath);if(typeof e.path=="string"&&e.path.length>0)return f.Uri.file(e.path);if(typeof e.href=="string"&&e.href.length>0)return f.Uri.parse(e.href);if(typeof e.scheme=="string")return f.Uri.from({scheme:e.scheme,authority:e.authority||"",path:e.path||e.fsPath||"",query:e.query||"",fragment:e.fragment||""});if(typeof e.toString=="function")try{let t=e.toString(!0);if(t&&t!=="[object Object]")return f.Uri.parse(t)}catch{let t=e.toString();if(t&&t!=="[object Object]")return f.Uri.parse(t)}}throw new Error(`Unsupported target type: ${typeof e}`)}async stat(e){if(!this.isWeb&&d)return d.stat(this.l(e));let t=this.c(e),n=await f.workspace.fs.stat(t);return{...n,mtime:U(n.mtime),ctime:U(n.ctime),birthtime:U(n.ctime),isFile:()=>n.type===f.FileType.File,isDirectory:()=>n.type===f.FileType.Directory}}async readFile(e,t="utf8"){if(!this.isWeb&&d)return d.readFile(this.l(e),t);let n=this.c(e),s=await f.workspace.fs.readFile(n);return t===null||t==="binary"?s:new TextDecoder(t).decode(s)}async writeFile(e,t,n="utf8"){let s=this.l(e);try{if(!this.isWeb&&d)return d.writeFile(s,t,n);let i=this.c(e),o=typeof t=="string"?new TextEncoder().encode(t):t;await f.workspace.fs.writeFile(i,o)}catch(i){this.U("write file",s,i)}}async mkdir(e,t={recursive:!0}){let n=this.l(e);try{if(!this.isWeb&&d)return d.mkdir(n,t);let s=this.c(e);await f.workspace.fs.createDirectory(s)}catch(s){this.U("create directory",n,s)}}async readdir(e,t={withFileTypes:!1}){if(!this.isWeb&&d)return d.readdir(this.l(e),t);let n=this.c(e),s=await f.workspace.fs.readDirectory(n);return t.withFileTypes?s.map(([i,o])=>({name:i,isDirectory:()=>o===f.FileType.Directory,isFile:()=>o===f.FileType.File})):s.map(([i])=>i)}async delete(e,t={recursive:!1}){if(!this.isWeb&&d){let s=this.l(e);return t.recursive?d.rm?d.rm(s,t):d.rmdir(s,t):d.unlink(s)}let n=this.c(e);await f.workspace.fs.delete(n,t)}async exists(e){try{return await this.stat(e),!0}catch{return!1}}async ensureDirectory(e){let t=He(this.l(e));await this.mkdir(t,{recursive:!0})}U(e,t,n){throw Ye(n)?new Ve(qe.FILE_PERMISSION_DENIED,`Permission denied while attempting to ${e}`,{path:t,code:n.code}):n}},Ze=new O;fe.exports={FileSystemAdapter:O,fileSystem:Ze}});var ye=h((wt,me)=>{var Xe="__explorerDatesVscode",E=null,A=null,T=!1;function Qe(){try{return globalThis[Xe]}catch{return}}function ge(){if(A)return A;let r={get:()=>{},async update(){},inspect:()=>({defaultValue:void 0,globalValue:void 0,workspaceValue:void 0,workspaceFolderValue:void 0})};return A={workspace:{workspaceFolders:[],getConfiguration:()=>r},ConfigurationTarget:{Global:1,Workspace:2,WorkspaceFolder:3}},A}var et=new Set(["MODULE_NOT_FOUND","ERR_MODULE_NOT_FOUND","WEB_NATIVE_MODULE"]);function tt(r){return!r||r.code&&et.has(r.code)?!0:(typeof r.message=="string"?r.message:"").includes("Cannot find module 'vscode'")}function F(){let r=Qe();if(r)return E=K(r),T=!1,E;if(E&&!T)return E;try{E=K(require("vscode")),T=!1}catch(e){if(tt(e))E=K(ge()),T=!0;else throw e}return E}var p=new Proxy({},{get(r,e){return F()[e]},set(r,e,t){return F()[e]=t,!0},has(r,e){return e in F()},ownKeys(){return Reflect.ownKeys(F())},getOwnPropertyDescriptor(r,e){let t=Object.getOwnPropertyDescriptor(F(),e);return t&&(t.configurable=!0),t}}),rt="explorerDates",pe="__explorerDatesConfigWrapped";function he(r){return!r||typeof r!="object"?{get:()=>{},async update(){},inspect:()=>({defaultValue:void 0,globalValue:void 0,workspaceValue:void 0,workspaceFolderValue:void 0})}:(typeof r.get!="function"&&(r.get=()=>{}),typeof r.update!="function"&&(r.update=async()=>{}),typeof r.inspect!="function"&&(r.inspect=()=>({defaultValue:void 0,globalValue:void 0,workspaceValue:void 0,workspaceFolderValue:void 0})),r)}function K(r){if(!r)return ge();r.ConfigurationTarget||(r.ConfigurationTarget={Global:1,Workspace:2,WorkspaceFolder:3}),r.workspace||(r.workspace={});let e=r.workspace.getConfiguration;if(typeof e=="function"&&!e[pe]){let t=function(...n){let s=e.apply(this,n);return he(s)};t[pe]=!0,r.workspace.getConfiguration=t}else typeof e!="function"&&(r.workspace.getConfiguration=()=>he());return Array.isArray(r.workspace.workspaceFolders)||(r.workspace.workspaceFolders=[]),r}var I=class{constructor(e={}){this.Q=e.defaultSection||rt}getValue(e,t={}){let{section:n,resource:s}=t,i=this.S(e,n);return this._(i.section,s).get(i.key)}inspect(e,t={}){let{section:n,resource:s}=t,i=this.S(e,n);return this._(i.section,s).inspect(i.key)}async updateSetting(e,t,n={}){let{scope:s="auto",resource:i,section:o,reason:a="",force:l=!1}=n,u=this.S(e,o),m=this._(u.section,i),k=this.ee(s,i),x=m.get(u.key),D=m.inspect(u.key),R=this.te(D,k);return t!==void 0&&this.re(x,t)&&!l&&R!==void 0?{key:u.fullKey,updated:!1,reason:"unchanged"}:(await m.update(u.key,t,k),{key:u.fullKey,updated:!0})}async applySettings(e,t={}){let n=Array.isArray(e)?e:Object.entries(e).map(([i,o])=>({key:i,value:o})),s=[];for(let i of n){let o={...t,...i.options||{}};s.push(await this.updateSetting(i.key,i.value,o))}return s}async clearSetting(e,t={}){return this.updateSetting(e,void 0,t)}_(e,t){return p.workspace.getConfiguration(e||void 0,t)}S(e,t){let n=t||this.Q;if(!n)return{section:void 0,key:e,fullKey:e};if(e.startsWith(`${n}.`)){let s=e.slice(n.length+1);return{section:n,key:s,fullKey:e}}return e.includes(".")?{section:void 0,key:e,fullKey:e}:{section:n,key:e,fullKey:`${n}.${e}`}}ee(e,t){return e&&e!=="auto"?this.ne(e)||p.ConfigurationTarget.Workspace:t?p.ConfigurationTarget.WorkspaceFolder:p.workspace.workspaceFolders&&p.workspace.workspaceFolders.length>0?p.ConfigurationTarget.Workspace:p.ConfigurationTarget.Global}ne(e){switch(e){case"user":return p.ConfigurationTarget.Global;case"workspace":return p.ConfigurationTarget.Workspace;case"workspaceFolder":return p.ConfigurationTarget.WorkspaceFolder;default:return}}he(e){switch(e){case p.ConfigurationTarget.Global:return"user";case p.ConfigurationTarget.Workspace:return"workspace";case p.ConfigurationTarget.WorkspaceFolder:return"workspaceFolder";default:return"unknown"}}re(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="object")try{return JSON.stringify(e)===JSON.stringify(t)}catch{return!1}return!1}te(e,t){if(e)switch(t){case p.ConfigurationTarget.Global:return e.globalValue;case p.ConfigurationTarget.Workspace:return e.workspaceValue;case p.ConfigurationTarget.WorkspaceFolder:return e.workspaceFolderValue;default:return}}},z=null;function nt(r){return(!z||r&&r.forceNew)&&(z=new I(r)),z}me.exports={SettingsCoordinator:I,getSettingsCoordinator:nt}});var we=h((Et,be)=>{var g=require("vscode"),{getLogger:st}=L(),{fileSystem:it}=de(),{normalizePath:B,getRelativePath:ot,getFileName:at}=S(),{getSettingsCoordinator:lt}=ye(),$=class{constructor(){this.e=st(),this.u=it,this.v=lt(),this.se=["node_modules",".npm",".yarn","coverage","nyc_output","dist","build","out","target","bin","obj",".vscode",".idea",".vs",".vscode-test",".git",".svn",".hg",".bzr",".pnpm-store","bower_components","jspm_packages","tmp","temp",".tmp",".cache",".parcel-cache",".DS_Store","Thumbs.db","__pycache__",".pytest_cache",".tox","venv",".env",".virtualenv","vendor",".docker","logs","*.log"],this.ge=new Map,this.ie=new Map,this.oe="explorer-dates-exclusions.json",this.O="workspaceExclusionProfiles",this.e.info("SmartExclusionManager initialized")}async cleanupAllWorkspaceProfiles(){let e=g.workspace.workspaceFolders||[];if(e.length===0){this.e.debug("No workspace folders available for exclusion cleanup");return}let t=0;for(let n of e)try{let s=n.uri;await this.K(n.uri,s)&&t++}catch(s){this.e.warn(`Failed to migrate exclusions for ${n.name}`,s)}t>0?this.e.info("Migrated workspace exclusion profiles to workspace storage",{workspaces:t}):this.e.debug("No legacy workspace exclusion profiles required migration")}async analyzeWorkspace(e){try{let t=B(e?.fsPath||e?.path||""),n={detectedPatterns:[],suggestedExclusions:[],projectType:"unknown",riskFolders:[]};n.projectType=await this.ae(e);let s=await this.le(e,t),i=this.ce(s,n.projectType);return n.detectedPatterns=s,n.suggestedExclusions=i.filter(o=>o.score>.7).map(o=>o.pattern),n.riskFolders=i.filter(o=>o.riskLevel==="high").map(o=>o.pattern),this.ie.set(t,n),this.e.info(`Workspace analysis complete for ${t}`,n),n}catch(t){return this.e.error("Failed to analyze workspace",t),null}}async ae(e){let t=[{file:"package.json",type:"javascript"},{file:"pom.xml",type:"java"},{file:"Cargo.toml",type:"rust"},{file:"setup.py",type:"python"},{file:"requirements.txt",type:"python"},{file:"Gemfile",type:"ruby"},{file:"composer.json",type:"php"},{file:"go.mod",type:"go"},{file:"CMakeLists.txt",type:"cpp"},{file:"Dockerfile",type:"docker"}];if(!e)return"unknown";for(let n of t)try{let s=g.Uri.joinPath(e,n.file);if(await this.u.exists(s))return n.type}catch{}return"unknown"}async le(e,t,n=2){let s=[],i=async(o,a=0)=>{if(!(a>n))try{let l=await this.u.readdir(o,{withFileTypes:!0});for(let u of l)if(u.isDirectory()){let m=g.Uri.joinPath(o,u.name),k=B(m.fsPath||m.path),x=ot(t,k);this.se.includes(u.name)&&s.push({name:u.name,path:x,type:"common",size:await this.z(m)});let D=await this.z(m);D>10485760&&s.push({name:u.name,path:x,type:"large",size:D}),await i(m,a+1)}}catch{}};return await i(e),s}async z(e){try{let t=await this.u.readdir(e,{withFileTypes:!0}),n=0,s=0;for(let i of t){if(s>100)break;if(i.isFile())try{let o=g.Uri.joinPath(e,i.name),a=await this.u.stat(o);n+=a.size,s++}catch{}}return n}catch{return 0}}ce(e,t){return e.map(n=>{let s=0,i="low";switch(n.type==="common"&&(s+=.8),n.size>100*1024*1024?(s+=.9,i="high"):n.size>10*1024*1024&&(s+=.5,i="medium"),t){case"javascript":["node_modules",".npm","coverage","dist","build"].includes(n.name)&&(s+=.9);break;case"python":["__pycache__",".pytest_cache","venv",".env"].includes(n.name)&&(s+=.9);break;case"java":["target","build",".gradle"].includes(n.name)&&(s+=.9);break}return["src","lib","app","components","pages"].includes(n.name.toLowerCase())&&(s=0,i="none"),{pattern:n.name,path:n.path,score:Math.min(s,1),riskLevel:i,size:n.size,type:n.type}})}async getWorkspaceExclusions(e){let t=this.B(e);if(!t)return this.e.debug("No workspace root for exclusions lookup"),[];let n=await this.$(t);return n||await this.K(e,t)||[]}async saveWorkspaceExclusions(e,t){let n=this.B(e);if(!n){this.e.warn("Cannot save workspace exclusions without a workspace root");return}let s=this.d(t),i=await this.$(n);if(i&&this.ue(i,s)){this.e.debug("Workspace exclusions already up to date",{workspace:this.b(e)});return}await this.G(n,s),await this.j(e),this.e.info(`Saved workspace exclusions for ${this.b(e)}`,s)}async getCombinedExclusions(e){let t=g.workspace.getConfiguration("explorerDates"),n=t.get("excludedFolders",[]),s=t.get("excludedPatterns",[]),i=t.get("smartExclusions",!0),o=[...n],a=[...s],l=await this.getWorkspaceExclusions(e);if(o.push(...l),i){let u=await this.analyzeWorkspace(e);u&&o.push(...u.suggestedExclusions)}return o=[...new Set(o)],a=[...new Set(a)],{folders:o,patterns:a}}b(e){if(!e)return"unknown-workspace";let t=e.fsPath||e.path||"";return at(t)||B(t)}async suggestExclusions(e){let t=await this.analyzeWorkspace(e),n=this.d(t?.suggestedExclusions||[]);if(!t||n.length===0)return;let s=await this.getWorkspaceExclusions(e),i=n.filter(u=>!s.includes(u));if(i.length===0){this.e.debug("No new smart exclusions detected",{workspace:this.b(e)});return}let o=this.fe(s,i);await this.saveWorkspaceExclusions(e,o);let a=i.length===1?`Explorer Dates automatically excluded "${i[0]}" to keep Explorer responsive.`:`Explorer Dates automatically excluded ${i.length} folders to keep Explorer responsive.`,l=await g.window.showInformationMessage(`${a} Keep these exclusions?`,"Keep","Review","Revert");l==="Revert"?(await this.saveWorkspaceExclusions(e,s),g.window.showInformationMessage("Smart exclusions reverted. Decorations will refresh for the restored folders."),this.e.info("User reverted smart exclusions",{reverted:i})):l==="Review"?(this.de(t),this.e.info("User reviewing smart exclusions",{pending:i})):this.e.info("User kept smart exclusions",{accepted:i})}B(e){return e||(g.workspace.workspaceFolders?.[0]?.uri??null)}H(e){return e?g.Uri.joinPath(e,".vscode"):null}V(e){let t=this.H(e);return t?g.Uri.joinPath(t,this.oe):null}async $(e){let t=this.V(e);if(!t)return null;try{let n=await this.u.readFile(t,"utf8"),s=JSON.parse(n);return Array.isArray(s)?this.d(s):Array.isArray(s?.exclusions)?this.d(s.exclusions):null}catch(n){return n?.code==="ENOENT"||n?.name==="EntryNotFound"||n?.message?.includes("ENOENT")||this.e.warn("Failed to read workspace exclusions file",{error:n.message}),null}}async G(e,t){let n=this.V(e);if(!n)return;let s=this.H(e);s&&await this.u.ensureDirectory(s);let i={version:1,updatedAt:new Date().toISOString(),exclusions:t};await this.u.writeFile(n,JSON.stringify(i,null,2))}async K(e,t){let n=this.b(e),s=this.v.getValue(this.O)||{},i=Array.isArray(s[n])?this.d(s[n]):[];return i.length?(t&&(await this.G(t,i),await this.j(e),this.e.info(`Migrated workspace exclusions for ${n} to workspace settings file`)),i):null}async j(e){let t=this.b(e),n=this.v.getValue(this.O)||{};t in n&&(delete n[t],await this.v.updateSetting(this.O,n,{scope:"user",reason:"workspace-exclusion-migration"}))}d(e=[]){return Array.from(new Set(e.filter(Boolean)))}fe(e=[],t=[]){return this.d([...e||[],...t||[]])}ue(e=[],t=[]){return e.length!==t.length?!1:e.every((n,s)=>n===t[s])}de(e){let t=g.window.createWebviewPanel("exclusionReview","Smart Exclusion Review",g.ViewColumn.One,{enableScripts:!0});t.webview.html=this.pe(e)}pe(e){let t=s=>{if(s<1024)return`${s} B`;let i=s/1024;return i<1024?`${i.toFixed(1)} KB`:`${(i/1024).toFixed(1)} MB`},n=e.detectedPatterns.map(s=>`
            <tr>
                <td>${s.name}</td>
                <td>${s.path}</td>
                <td>${t(s.size)}</td>
                <td>${s.type}</td>
                <td>
                    <input type="checkbox" ${e.suggestedExclusions.includes(s.name)?"checked":""}>
                </td>
            </tr>
        `).join("");return`
            <!DOCTYPE html>
            <html>
            <head>
                <meta charset="UTF-8">
                <title>Smart Exclusion Review</title>
                <style>
                    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; padding: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { padding: 8px 12px; text-align: left; border-bottom: 1px solid #333; }
                    th { background-color: var(--vscode-editor-background); font-weight: bold; }
                    .project-info { background: var(--vscode-editor-background); padding: 15px; border-radius: 4px; margin-bottom: 20px; }
                </style>
            </head>
            <body>
                <h1>\u{1F9E0} Smart Exclusion Review</h1>
                <div class="project-info">
                    <strong>Project Type:</strong> ${e.projectType}<br>
                    <strong>Detected Patterns:</strong> ${e.detectedPatterns.length}<br>
                    <strong>Suggested Exclusions:</strong> ${e.suggestedExclusions.length}
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Folder</th>
                            <th>Path</th>
                            <th>Size</th>
                            <th>Type</th>
                            <th>Exclude</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${n}
                    </tbody>
                </table>
            </body>
            </html>
        `}};be.exports={SmartExclusionManager:$}});var{IncrementalIndexer:Ee}=se(),{SmartExclusionManager:ke}=we(),{getLogger:ct}=L(),G=class{constructor(e){this.F=e,this.e=ct(),this.n=null,this.t=null,this.w=!1}async initialize(e={}){if(this.w)return;let{batchProcessor:t,enableProgressiveAnalysis:n}=e;this.n||(this.n=new Ee(this.F)),this.n.initialize({batchProcessor:t,enableProgressiveAnalysis:n}),this.t||(this.t=new ke),this.w=!0,this.e.info("Workspace intelligence components initialized")}async analyzeWorkspace(e,t={}){if(!(!this.w||!e?.length))try{if(this.n&&(await this.n.startInitialIndex(e,{maxFiles:t.maxFiles||2e3}),this.e.info("Workspace indexing started")),this.t)for(let n of e)try{await this.t.suggestExclusions(n.uri),this.e.info(`Smart exclusions analyzed for: ${n.name}`)}catch(s){this.e.error(`Failed to analyze smart exclusions for ${n.name}`,s)}}catch(n){this.e.error("Failed to analyze workspace",n)}}async cleanupWorkspaceProfiles(){if(this.t)try{await this.t.cleanupAllWorkspaceProfiles()}catch(e){this.e.warn("Failed to clean workspace exclusion profiles",e)}}async enableProgressiveAnalysis(){return this.n?this.n.enableProgressiveAnalysis():null}disableProgressiveAnalysis(){this.n&&this.n.disableProgressiveAnalysis()}getMetrics(){let e={};return this.n?.getMetrics&&(e.incrementalIndexer=this.n.getMetrics()),this.t?.getMetrics&&(e.smartExclusion=this.t.getMetrics()),e}async onWorkspaceFoldersChanged(e){if(this.w&&(e.added?.length&&await this.analyzeWorkspace(e.added),e.removed?.length&&this.t))for(let t of e.removed)try{await this.t.removeWorkspaceProfile(t.uri)}catch(n){this.e.warn(`Failed to remove workspace profile for ${t.name}`,n)}}shouldExclude(e){return this.t?this.t.shouldExclude(e):!1}getExclusionPatterns(e){return this.t?this.t.getExclusionPatterns(e):[]}dispose(){this.n?.dispose&&this.n.dispose(),this.t?.dispose&&this.t.dispose(),this.w=!1,this.e.debug("Workspace intelligence components disposed")}get incrementalIndexer(){return this.n}get smartExclusion(){return this.t}};module.exports={WorkspaceIntelligenceManager:G,IncrementalIndexer:Ee,SmartExclusionManager:ke};
