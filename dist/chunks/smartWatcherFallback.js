var u=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var g=u((exports,module)=>{var vscode=require("vscode"),isWebRuntime=process.env.VSCODE_WEB==="true",inspectValue=isWebRuntime?s=>{if(typeof s=="string")return s;try{return JSON.stringify(s,null,2)}catch{return"<<unable to serialize log arg>>"}}:eval("require")("util").inspect,DEFAULT_LOG_PROFILE="default",SUPPORTED_PROFILES=new Set(["default","stress","soak"]),LOG_LEVEL_ORDER=["debug","info","warn","error"],DEFAULT_CONSOLE_LEVEL="warn",Logger=class{constructor(){this.t=vscode.window.createOutputChannel("Explorer Dates"),this.f=!1,this.l=null,this.r=(process.env.EXPLORER_DATES_LOG_PROFILE||DEFAULT_LOG_PROFILE).toLowerCase(),SUPPORTED_PROFILES.has(this.r)||(this.r=DEFAULT_LOG_PROFILE),this.n=new Map,this.O=DEFAULT_CONSOLE_LEVEL,this.m(),this.l=vscode.workspace.onDidChangeConfiguration(e=>{(e.affectsConfiguration("explorerDates.enableLogging")||e.affectsConfiguration("explorerDates.consoleLogLevel"))&&this.m()})}m(){let e=vscode.workspace.getConfiguration("explorerDates");this.f=e.get("enableLogging",!1);let t=(e.get("consoleLogLevel",DEFAULT_CONSOLE_LEVEL)||"").toLowerCase();this.O=LOG_LEVEL_ORDER.includes(t)?t:DEFAULT_CONSOLE_LEVEL}setLogProfile(e=DEFAULT_LOG_PROFILE){let t=(e||DEFAULT_LOG_PROFILE).toLowerCase();this.r=SUPPORTED_PROFILES.has(t)?t:DEFAULT_LOG_PROFILE,this.resetThrottle()}resetThrottle(e){if(e){this.n.delete(e);return}this.n.clear()}debug(e,...t){this.f&&this.c("debug",null,e,t)}info(e,...t){this.c("info",null,e,t)}infoWithOptions(e,t,...i){this.c("info",e||null,t,i)}warn(e,...t){this.c("warn",null,e,t)}error(e,t,...i){let n=`[${new Date().toISOString()}] [ERROR] ${e}`;this.t.appendLine(n),t instanceof Error?(this.t.appendLine(`Error: ${t.message}`),t.stack&&this.t.appendLine(`Stack: ${t.stack}`)):t&&this.t.appendLine(this.u(t));let r=this._(i);r.length>0&&r.forEach(l=>this.t.appendLine(this.u(l))),this.g("error",n,[t,...r])}show(){this.t.show()}clear(){this.t.clear()}dispose(){this.t.dispose(),this.l&&(this.l.dispose(),this.l=null);let e="__explorerDatesLogger";typeof global<"u"&&global[e]===this?global[e]=null:typeof globalThis<"u"&&globalThis[e]===this?globalThis[e]=null:typeof window<"u"&&window[e]===this&&(window[e]=null),loggerInstance===this&&(loggerInstance=null)}c(e,t,i,o){if(e==="debug"&&!this.f||this.y(e,t))return;let r=`[${new Date().toISOString()}] [${e.toUpperCase()}] ${i}`;this.t.appendLine(r);let l=this._(o);l.length>0&&l.forEach(y=>this.t.appendLine(this.u(y))),this.g(e,r,l)}_(e){return!e||e.length===0?[]:e.map(t=>{if(typeof t!="function")return t;try{return t()}catch(i){return`<<log arg threw: ${i.message}>>`}})}u(e){try{return typeof e=="string"?e:typeof e=="object"?JSON.stringify(e,null,2):inspectValue(e)}catch(t){return`<<failed to serialize log arg: ${t.message}>>`}}y(e,t){if(e!=="info"||!t||!t.throttleKey)return!1;let i=(t.profile||"stress").toLowerCase();if(!this.R(i))return!1;let o=Number(t.throttleLimit)||50,n=t.throttleKey,r=this.n.get(n)||{count:0,suppressed:0,noticeLogged:!1};if(r.count<o)return r.count+=1,this.n.set(n,r),!1;if(r.suppressed+=1,!r.noticeLogged){r.noticeLogged=!0;let l=`[${new Date().toISOString()}] [INFO] \u23F8\uFE0F Suppressing further logs for "${n}" after ${o} entries (profile=${this.r})`;this.t.appendLine(l),this.g("info",l)}return this.n.set(n,r),!0}R(e){let t=this.r||DEFAULT_LOG_PROFILE;return e==="default"?t===DEFAULT_LOG_PROFILE:t===e}b(e){let t=LOG_LEVEL_ORDER.indexOf(this.O),i=LOG_LEVEL_ORDER.indexOf(e);return t===-1||i===-1?!1:i>=t}g(e,t,i=[]){if(!this.b(e))return;(e==="warn"?console.warn:e==="error"?console.error:console.log).call(console,t,...i)}},GLOBAL_LOGGER_KEY="__explorerDatesLogger";function getLogger(){return typeof global<"u"?(global[GLOBAL_LOGGER_KEY]||(global[GLOBAL_LOGGER_KEY]=new Logger),global[GLOBAL_LOGGER_KEY]):typeof globalThis<"u"?(globalThis[GLOBAL_LOGGER_KEY]||(globalThis[GLOBAL_LOGGER_KEY]=new Logger),globalThis[GLOBAL_LOGGER_KEY]):typeof window<"u"?(window[GLOBAL_LOGGER_KEY]||(window[GLOBAL_LOGGER_KEY]=new Logger),window[GLOBAL_LOGGER_KEY]):(loggerInstance||(loggerInstance=new Logger),loggerInstance)}var loggerInstance=null;module.exports={Logger,getLogger}});var w=u((k,E)=>{function c(s=""){return s?s.replace(/\\/g,"/"):""}function R(s=""){let e=c(s);return e?e.split("/").filter(Boolean):[]}function p(s=""){let e=R(s);return e.length?e[e.length-1]:""}function b(s=""){let e=p(s),t=e.lastIndexOf(".");return t<=0?"":e.substring(t).toLowerCase()}function G(s=""){let e=c(s),t=e.lastIndexOf("/");return t===-1?"":e.substring(0,t)}function S(...s){return c(s.filter(Boolean).join("/")).replace(/\/+/g,"/")}function D(s=""){return c(s).toLowerCase()}function F(s=""){if(!s)return"";if(typeof s=="string")return s;if(typeof s.fsPath=="string"&&s.fsPath.length>0)return s.fsPath;if(typeof s.path=="string"&&s.path.length>0)return s.path;if(typeof s.toString=="function")try{return s.toString(!0)}catch{return s.toString()}return String(s)}function P(s="",e=""){let t=c(s),i=c(e);return t&&i.startsWith(t)?i.substring(t.length).replace(/^\/+/,""):i}E.exports={normalizePath:c,getFileName:p,getExtension:b,getDirectory:G,joinPath:S,getCacheKey:D,getUriPath:F,getRelativePath:P}});var _=u((C,m)=>{var a=require("vscode"),{getLogger:O}=g(),{normalizePath:I}=w(),h=class{constructor(e={}){this.e=e.logger||O(),this.G=e.pattern,this.S=e.pollingInterval||2e3,this.o=new Map,this.s=!1,this.a=null,this.d=new a.EventEmitter,this.L=new a.EventEmitter,this.p=new a.EventEmitter,this.e.warn("Using legacy file watcher fallback - performance may be reduced"),this.D()}get onDidChange(){return this.d.event}get onDidCreate(){return this.L.event}get onDidDelete(){return this.p.event}D(){this.s||this.a||(this.a=setInterval(()=>{this.F().catch(e=>{this.e.debug("Polling error in legacy watcher:",e)})},this.S))}async F(){if(!this.s)try{let e=a.workspace.workspaceFolders||[];for(let t of e)await this.P(t)}catch(e){this.e.debug("Error polling workspace folders:",e)}}async P(e){try{let t=await a.workspace.findFiles(this.G||"**/*","**/node_modules/**",1e3);for(let i of t)await this.I(i)}catch(t){this.e.debug(`Error polling folder ${e.name}:`,t)}}async I(e){if(this.s)return;let t=e.fsPath,i=I(t);try{let n=(await a.workspace.fs.stat(e)).mtime,r=this.o.get(i);r?r.mtime!==n&&(r.mtime=n,this.d.fire(e)):(this.o.set(i,{mtime:n,exists:!0}),this.L.fire(e))}catch{let o=this.o.get(i);o&&o.exists&&(o.exists=!1,this.p.fire(e),this.o.delete(i))}}dispose(){this.s||(this.s=!0,this.a&&(clearInterval(this.a),this.a=null),this.d.dispose(),this.L.dispose(),this.p.dispose(),this.o.clear(),this.e.debug("Legacy file watcher disposed"))}},d=class{constructor(e={}){this.e=e.logger||O(),this.T=e.nativeWatcherTimeout||5e3,this.E=new Set,this.s=!1,this.w=!1}async createWatcherWithFallback(e,t={}){if(this.s)throw new Error("SmartWatcherFallback has been disposed");try{let i=await this.v(e,t);if(i)return this.e.debug(`Native watcher created successfully for pattern: ${e}`),i}catch(i){this.e.debug(`Native watcher failed for pattern ${e}:`,i)}return this.A(e,t)}async v(e){return new Promise((t,i)=>{let o=setTimeout(()=>{i(new Error("Native watcher creation timeout"))},this.T);try{let n=a.workspace.createFileSystemWatcher(e),r=n.onDidChange(()=>{clearTimeout(o),r.dispose(),t(n)});setTimeout(()=>{clearTimeout(o),r.dispose(),t(n)},1e3)}catch(n){clearTimeout(o),i(n)}})}A(e,t){this.w||(this.w=!0,this.e.info("\u{1F504} Smart watcher fallback activated - using legacy polling mode"));let i=new h({pattern:e,logger:this.e,pollingInterval:t.pollingInterval||2e3});return this.E.add(i),i}static platformRequiresFallback(){let e=process.platform,t=process.env.WSL_DISTRO_NAME||process.env.WSLENV,i=a.env.remoteName,o=process.env.DOCKER_CONTAINER;return t||i||o||e==="android"}static async testNativeWatcherSupport(){try{let e=a.workspace.createFileSystemWatcher("**/.vscode-watcher-test-*"),t=!!e;return e.dispose(),t}catch{return!1}}dispose(){if(!this.s){this.s=!0;for(let e of this.E)try{e.dispose()}catch(t){this.e.debug("Error disposing legacy watcher:",t)}this.E.clear(),this.w&&this.e.debug("Smart watcher fallback manager disposed")}}};m.exports={SmartWatcherFallback:d,LegacyFileWatcher:h}});var{SmartWatcherFallback:f,LegacyFileWatcher:T}=_(),{getLogger:v}=g(),L=class{constructor(e={}){this.e=e.logger||v(),this.i=null,this.h=!1}async initialize(){return this.h?this.i:(this.i=new f({logger:this.e}),this.h=!0,this.e.info("\u{1F4E6} Smart watcher fallback chunk loaded on demand (~3-4KB)"),this.i)}async getFallback(){return this.h||await this.initialize(),this.i}static isPlatformFallbackRequired(){return f.platformRequiresFallback()}static async testNativeSupport(){return f.testNativeWatcherSupport()}dispose(){this.i&&(this.i.dispose(),this.i=null),this.h=!1}};module.exports={SmartWatcherFallbackManager:L,SmartWatcherFallback:f,LegacyFileWatcher:T};
