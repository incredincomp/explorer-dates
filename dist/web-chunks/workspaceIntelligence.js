var module = { exports: {} }; var exports = module.exports; (function() {
var p=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var F=p((exports,module)=>{var vscode=require("vscode"),isWebRuntime=process.env.VSCODE_WEB==="true",inspectValue=isWebRuntime?r=>{if(typeof r=="string")return r;try{return JSON.stringify(r,null,2)}catch{return"<<unable to serialize log arg>>"}}:eval("require")("util").inspect,DEFAULT_LOG_PROFILE="default",SUPPORTED_PROFILES=new Set(["default","stress","soak"]),LOG_LEVEL_ORDER=["debug","info","warn","error"],DEFAULT_CONSOLE_LEVEL="warn",TEST_CONSOLE_LEVEL=process.env.EXPLORER_DATES_TEST_MODE==="1"?"warn":null,Logger=class{constructor(){this.n=vscode.window.createOutputChannel("Explorer Dates"),this.y=!1,this.E=null,this.w=process.env.EXPLORER_DATES_TEST_MODE==="1",this.d=(process.env.EXPLORER_DATES_LOG_PROFILE||DEFAULT_LOG_PROFILE).toLowerCase(),SUPPORTED_PROFILES.has(this.d)||(this.d=DEFAULT_LOG_PROFILE),this.h=new Map,this.v=DEFAULT_CONSOLE_LEVEL,this.O(),this.E=vscode.workspace.onDidChangeConfiguration(e=>{(e.affectsConfiguration("explorerDates.enableLogging")||e.affectsConfiguration("explorerDates.consoleLogLevel"))&&this.O()})}O(){let e=vscode.workspace.getConfiguration("explorerDates");this.y=e.get("enableLogging",!1);let t=(process.env.EXPLORER_DATES_LOG_LEVEL||"").toLowerCase(),n=(e.get("consoleLogLevel",DEFAULT_CONSOLE_LEVEL)||"").toLowerCase(),s=TEST_CONSOLE_LEVEL||t||n||DEFAULT_CONSOLE_LEVEL;this.v=LOG_LEVEL_ORDER.includes(s)?s:DEFAULT_CONSOLE_LEVEL,TEST_CONSOLE_LEVEL&&(this.y=!1)}setLogProfile(e=DEFAULT_LOG_PROFILE){let t=(e||DEFAULT_LOG_PROFILE).toLowerCase();this.d=SUPPORTED_PROFILES.has(t)?t:DEFAULT_LOG_PROFILE,this.resetThrottle()}resetThrottle(e){if(e){this.h.delete(e);return}this.h.clear()}debug(e,...t){this.y&&this.k("debug",null,e,t)}info(e,...t){this.k("info",null,e,t)}infoWithOptions(e,t,...n){this.k("info",e||null,t,n)}warn(e,...t){this.k("warn",null,e,t)}error(e,t,...n){let i=`[${new Date().toISOString()}] [ERROR] ${e}`;this.w||(this.n.appendLine(i),t instanceof Error?(this.n.appendLine(`Error: ${t.message}`),t.stack&&this.n.appendLine(`Stack: ${t.stack}`)):t&&this.n.appendLine(this.x(t)));let o=this.A(n);o.length>0&&!this.w&&o.forEach(l=>this.n.appendLine(this.x(l)));let a=[];t!=null&&a.push(t),o.length>0&&a.push(...o),this.L("error",i,a)}show(){this.n.show()}clear(){this.n.clear()}dispose(){this.n.dispose(),this.E&&(this.E.dispose(),this.E=null);let e="__explorerDatesLogger";typeof global<"u"&&global[e]===this?global[e]=null:typeof globalThis<"u"&&globalThis[e]===this?globalThis[e]=null:typeof globalThis<"u"&&globalThis.window?.[e]===this&&(globalThis.window[e]=null),loggerInstance===this&&(loggerInstance=null)}k(e,t,n,s){if(e==="debug"&&!this.y||this.j(e,t))return;let o=`[${new Date().toISOString()}] [${e.toUpperCase()}] ${n}`;this.w||this.n.appendLine(o);let a=this.A(s);a.length>0&&!this.w&&a.forEach(l=>this.n.appendLine(this.x(l))),this.L(e,o,a)}A(e){return!e||e.length===0?[]:e.map(t=>{if(typeof t!="function")return t;try{return t()}catch(n){return`<<log arg threw: ${n.message}>>`}})}x(e){try{return typeof e=="string"?e:typeof e=="object"?JSON.stringify(e,null,2):inspectValue(e)}catch(t){return`<<failed to serialize log arg: ${t.message}>>`}}j(e,t){if(e!=="info"||!t||!t.throttleKey)return!1;let n=(t.profile||"stress").toLowerCase();if(!this.H(n))return!1;let s=Number(t.throttleLimit)||50,i=t.throttleKey,o=this.h.get(i)||{count:0,suppressed:0,noticeLogged:!1};if(o.count<s)return o.count+=1,this.h.set(i,o),!1;if(o.suppressed+=1,!o.noticeLogged){o.noticeLogged=!0;let a=`[${new Date().toISOString()}] [INFO] \u23F8\uFE0F Suppressing further logs for "${i}" after ${s} entries (profile=${this.d})`;this.n.appendLine(a),this.L("info",a)}return this.h.set(i,o),!0}H(e){let t=this.d||DEFAULT_LOG_PROFILE;return e==="default"?t===DEFAULT_LOG_PROFILE:t===e}q(e){let t=LOG_LEVEL_ORDER.indexOf(this.v),n=LOG_LEVEL_ORDER.indexOf(e);return t===-1||n===-1?!1:n>=t}L(e,t,n=[]){if(!this.q(e))return;(e==="warn"?console.warn:e==="error"?console.error:console.log).call(console,t,...n)}},GLOBAL_LOGGER_KEY="__explorerDatesLogger";function getLogger(){return typeof global<"u"?(global[GLOBAL_LOGGER_KEY]||(global[GLOBAL_LOGGER_KEY]=new Logger),global[GLOBAL_LOGGER_KEY]):typeof globalThis<"u"?(globalThis[GLOBAL_LOGGER_KEY]||(globalThis[GLOBAL_LOGGER_KEY]=new Logger),globalThis.window&&(globalThis.window[GLOBAL_LOGGER_KEY]=globalThis[GLOBAL_LOGGER_KEY]),globalThis[GLOBAL_LOGGER_KEY]):(loggerInstance||(loggerInstance=new Logger),loggerInstance)}var loggerInstance=null;module.exports={Logger,getLogger}});var C=p((ht,H)=>{function b(r=""){return r?r.replace(/\\/g,"/"):""}function Se(r=""){let e=b(r);return e?e.split("/").filter(Boolean):[]}function j(r=""){let e=Se(r);return e.length?e[e.length-1]:""}function ve(r=""){let e=j(r),t=e.lastIndexOf(".");return t<=0?"":e.substring(t).toLowerCase()}function Oe(r=""){let e=b(r),t=e.lastIndexOf("/");return t===-1?"":e.substring(0,t)}function Ae(...r){return b(r.filter(Boolean).join("/")).replace(/\/+/g,"/")}function Te(r=""){return b(r).toLowerCase()}function Ie(r=""){if(!r)return"";if(typeof r=="string")return r;if(typeof r.fsPath=="string"&&r.fsPath.length>0)return r.fsPath;if(typeof r.path=="string"&&r.path.length>0)return r.path;if(typeof r.toString=="function")try{return r.toString(!0)}catch{return r.toString()}return String(r)}function Re(r="",e=""){let t=b(r),n=b(e);return t&&n.startsWith(t)?n.substring(t.length).replace(/^\/+/,""):n}H.exports={normalizePath:b,getFileName:j,getExtension:ve,getDirectory:Oe,joinPath:Ae,getCacheKey:Te,getUriPath:Ie,getRelativePath:Re}});var P=p((pt,J)=>{function q(){return typeof performance<"u"&&performance.now&&performance.timeOrigin?Math.floor(performance.timeOrigin+performance.now()):typeof Date=="function"&&Date.now?Date.now():16409952e5}function Y(r){return!!(r&&typeof r=="object"&&typeof r.getTime=="function")}function x(r){if(!r||isNaN(r))return"Invalid Date";if(typeof Intl<"u"&&Intl.DateTimeFormat)try{return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(r)}catch{}let e=864e5,t=36e5,n=6e4,s=1e3,i=1970,o=Math.floor(r/e),a=r%e,l=Math.floor(a/t),d=Math.floor(a%t/n),m=Math.floor(a%n/s),L=i+Math.floor(o/365.25),k=Math.floor(o%365.25/30.44)+1,_=Math.floor(o%30.44)+1,V=String(Math.min(k,12)).padStart(2,"0"),Le=String(Math.min(_,31)).padStart(2,"0"),Fe=String(l).padStart(2,"0"),De=String(d).padStart(2,"0"),Ce=String(m).padStart(2,"0");return`${V}/${Le}/${L}, ${Fe}:${De}:${Ce}`}function Pe(r){if(Y(r))return r;let e=typeof Date=="function"&&Date.prototype&&Date.prototype.constructor===Date;if(r==null){if(!e){let t=q();return{getTime:()=>t,toLocaleString:()=>x(t),toString:()=>x(t)}}return new Date}if(typeof r=="number")return e?new Date(r):{getTime:()=>r,toLocaleString:()=>x(r),toString:()=>x(r)};if(typeof r=="string"){let t=0;if(e)t=Date.parse(r);else{let n=parseFloat(r);t=isNaN(n)?0:n}return e?new Date(r):{getTime:()=>t,toLocaleString:()=>x(t),toString:()=>x(t)}}return e?new Date(r):{getTime:()=>0,toLocaleString:()=>"Invalid Date",toString:()=>"Invalid Date"}}J.exports={ensureDate:Pe,isDateLike:Y,getCurrentTimestamp:q}});var X=p((gt,Z)=>{var c={onboarding:34,analysisCommands:23,exportReporting:17,extensionApi:15,workspaceTemplates:14,advancedCache:28,workspaceIntelligence:31,incrementalWorkers:19},E=99,y={minimal:{id:"minimal",name:"Minimal",description:"Core decorations only, smallest bundle (~99KB)",targetBundleSize:E,settings:{"explorerDates.enableOnboardingSystem":!1,"explorerDates.enableAnalysisCommands":!1,"explorerDates.enableExportReporting":!1,"explorerDates.enableExtensionApi":!1,"explorerDates.enableWorkspaceTemplates":!1,"explorerDates.enableAdvancedCache":!1,"explorerDates.enableWorkspaceIntelligence":!1,"explorerDates.enableIncrementalWorkers":!1,"explorerDates.performanceMode":!0,"explorerDates.showDateDecorations":!0,"explorerDates.dateDecorationFormat":"relative-short"},targetScenarios:["Resource-constrained environments","Basic file dates only","Large remote workspaces"]},balanced:{id:"balanced",name:"Balanced",description:"Essential features with optimization (~200KB)",targetBundleSize:E+c.onboarding+c.workspaceTemplates+c.advancedCache+c.analysisCommands,settings:{"explorerDates.enableOnboardingSystem":!0,"explorerDates.enableAnalysisCommands":!0,"explorerDates.enableExportReporting":!1,"explorerDates.enableExtensionApi":!1,"explorerDates.enableWorkspaceTemplates":!0,"explorerDates.enableAdvancedCache":!0,"explorerDates.enableWorkspaceIntelligence":!1,"explorerDates.enableIncrementalWorkers":!1,"explorerDates.performanceMode":!0,"explorerDates.smartFileWatching":!0},targetScenarios:["Most development workflows","Remote environments","Medium to large workspaces"]},"web-development":{id:"web-development",name:"Web Development",description:"Optimized for web projects (~240KB)",targetBundleSize:E+c.onboarding+c.analysisCommands+c.workspaceTemplates+c.advancedCache+c.incrementalWorkers,settings:{"explorerDates.enableOnboardingSystem":!0,"explorerDates.enableAnalysisCommands":!0,"explorerDates.enableExportReporting":!1,"explorerDates.enableExtensionApi":!1,"explorerDates.enableWorkspaceTemplates":!0,"explorerDates.enableAdvancedCache":!0,"explorerDates.enableWorkspaceIntelligence":!1,"explorerDates.enableIncrementalWorkers":!0,"explorerDates.showGitInfo":"author","explorerDates.colorScheme":"file-type"},targetScenarios:["JavaScript/TypeScript projects","Node.js development","Frontend frameworks"]},enterprise:{id:"enterprise",name:"Enterprise",description:"Full feature set with reporting and API (~380KB)",targetBundleSize:Object.values(c).reduce((r,e)=>r+e,E),settings:{"explorerDates.enableOnboardingSystem":!0,"explorerDates.enableAnalysisCommands":!0,"explorerDates.enableExportReporting":!0,"explorerDates.enableExtensionApi":!0,"explorerDates.enableWorkspaceTemplates":!0,"explorerDates.enableAdvancedCache":!0,"explorerDates.enableWorkspaceIntelligence":!0,"explorerDates.enableIncrementalWorkers":!0,"explorerDates.persistentCache":!0,"explorerDates.smartExclusions":!0},targetScenarios:["Team lead workflows","Analytics and reporting needs","API integration requirements","Full workspace intelligence"]},"data-science":{id:"data-science",name:"Data Science",description:"Optimized for data workflows (~280KB)",targetBundleSize:E+c.onboarding+c.analysisCommands+c.exportReporting+c.workspaceIntelligence+c.advancedCache,settings:{"explorerDates.enableOnboardingSystem":!0,"explorerDates.enableAnalysisCommands":!0,"explorerDates.enableExportReporting":!0,"explorerDates.enableExtensionApi":!1,"explorerDates.enableWorkspaceTemplates":!1,"explorerDates.enableAdvancedCache":!0,"explorerDates.enableWorkspaceIntelligence":!0,"explorerDates.enableIncrementalWorkers":!1,"explorerDates.dateDecorationFormat":"iso-detailed"},targetScenarios:["Jupyter notebooks","Python data analysis","Research workflows"]}},We=new Set(["enableOnboardingSystem","enableAnalysisCommands","enableExportReporting","enableExtensionApi","enableWorkspaceTemplates","enableAdvancedCache","enableWorkspaceIntelligence","enableIncrementalWorkers","performanceMode","smartFileWatching"]);function Me(r){let e=E;return r["explorerDates.enableOnboardingSystem"]&&(e+=c.onboarding),r["explorerDates.enableAnalysisCommands"]&&(e+=c.analysisCommands),r["explorerDates.enableExportReporting"]&&(e+=c.exportReporting),r["explorerDates.enableExtensionApi"]&&(e+=c.extensionApi),r["explorerDates.enableWorkspaceTemplates"]&&(e+=c.workspaceTemplates),r["explorerDates.enableAdvancedCache"]&&(e+=c.advancedCache),r["explorerDates.enableWorkspaceIntelligence"]&&(e+=c.workspaceIntelligence),r["explorerDates.enableIncrementalWorkers"]&&(e+=c.incrementalWorkers),e}function Ne(r){switch(r){case"minimal":case"extreme":return y.minimal;case"balanced":return y.balanced;case"web-development":return y["web-development"];case"data-science":return y["data-science"];case"enterprise":return y.enterprise;default:return y.balanced}}Z.exports={PRESET_DEFINITIONS:y,CHUNK_SIZES:c,BASE_BUNDLE_SIZE:E,RESTART_REQUIRED_SETTINGS:We,calculateBundleSize:Me,getDefaultPresetForProfile:Ne}});var ee=p((mt,Q)=>{var S={onboarding:"src/chunks/onboarding-chunk",onboardingAssets:"src/chunks/onboarding-assets-chunk",reporting:"src/chunks/reporting-chunk",templates:"src/chunks/templates-chunk",analysis:"src/chunks/analysis-chunk",diagnostics:"src/chunks/diagnostics-chunk",extensionApi:"src/chunks/extension-api-chunk",advancedCache:"src/chunks/advancedCache-chunk",batchProcessor:"src/chunks/batchProcessor-chunk",decorationsAdvanced:"src/chunks/decorations-advanced",workspaceIntelligence:"src/chunks/workspaceIntelligence",incrementalWorkers:"src/chunks/incrementalWorkers",uiAdapters:"src/chunks/ui-adapters",gitInsights:"src/chunks/gitInsights-chunk",smartWatcherFallback:"src/chunks/smartWatcherFallback-chunk",runtimeManagement:"src/chunks/runtime-management"};function Ue(r){return S[r]||null}function Ke(){return Object.keys(S)}function Ge(r){let e={};for(let[t,n]of Object.entries(S))e[t]=()=>r(`./${n}`);return e}Q.exports={CHUNK_MAP:S,getChunkSourcePath:Ue,getAllChunkNames:Ke,generateDevLoaderMap:Ge}});var te=p((exports,module)=>{var FEATURE_FLAGS_GLOBAL_KEY="__explorerDatesFeatureFlags";function registerFeatureFlagsGlobal(r){if(r)try{typeof globalThis<"u"&&(globalThis[FEATURE_FLAGS_GLOBAL_KEY]=r)}catch{}}function loadFeatureFlagsFallback(){try{let dynamicRequire=typeof eval=="function"?eval("require"):null;if(typeof dynamicRequire=="function")return dynamicRequire("../featureFlags")}catch{}return null}function getFeatureFlagsGlobal(){try{if(typeof globalThis<"u"&&globalThis[FEATURE_FLAGS_GLOBAL_KEY])return globalThis[FEATURE_FLAGS_GLOBAL_KEY]}catch{}return loadFeatureFlagsFallback()}module.exports={FEATURE_FLAGS_GLOBAL_KEY,registerFeatureFlagsGlobal,getFeatureFlagsGlobal}});var re=p((exports,module)=>{var{getLogger}=F(),{CHUNK_SIZES}=X(),{getChunkSourcePath,getAllChunkNames}=ee(),{registerFeatureFlagsGlobal}=te(),featureLogger=null,DEFAULT_CHUNK_TIMEOUT_MS=Number(process.env.EXPLORER_DATES_CHUNK_TIMEOUT||5e3),NETWORK_ERROR_CODES=new Set(["ENOTFOUND","ECONNRESET","ECONNREFUSED","EAI_AGAIN","ETIMEDOUT","EHOSTUNREACH"]),BUILT_CHUNK_CACHE=new Map,CHUNK_METHOD_ALIASES={reporting:"exportReporting",templates:"workspaceTemplates",analysis:"analysisCommands"},DEV_CHUNK_PATH_CACHE=new Map;function getDevChunkImportPath(r){if(DEV_CHUNK_PATH_CACHE.has(r))return DEV_CHUNK_PATH_CACHE.get(r);let e=getChunkSourcePath(r);if(!e)return DEV_CHUNK_PATH_CACHE.set(r,null),null;let t=e;return t.startsWith("src/")&&(t=t.slice(4)),t.startsWith("./")||(t=`./${t}`),DEV_CHUNK_PATH_CACHE.set(r,t),t}function resolveNodeDependencies(){if(nativeDepsResolved)return!!(nativePath&&nativeFs);if(nativeDepsResolved=!0,!isNodeLikeRuntime())return!1;try{nativePath=eval("require")("path"),nativeFs=eval("require")("fs")}catch{nativePath=null,nativeFs=null}return!!(nativePath&&nativeFs)}var nativeDepsResolved=!1,nativePath=null,nativeFs=null;function isWebRuntime(){try{return typeof navigator<"u"&&navigator?.userAgent?navigator.userAgent.includes("vscode-web")||navigator.userAgent.includes("Code - Web"):typeof process<"u"&&process?.env?.VSCODE_WEB==="true"}catch{return!1}}function isNodeLikeRuntime(){return typeof process<"u"&&!!process.versions?.node&&!isWebRuntime()}function getChunkTimeoutMs(){return DEFAULT_CHUNK_TIMEOUT_MS>0?DEFAULT_CHUNK_TIMEOUT_MS:0}function logFeature(r,e,t){featureLogger||(featureLogger=getLogger());let n=featureLogger;typeof n[r]=="function"?n[r](e,t):n.info(e,t)}function logFeatureDisabled(r,e){logFeature("info","Feature disabled via configuration",{feature:r,savedKB:e&&CHUNK_SIZES[e]!==void 0?CHUNK_SIZES[e]:void 0})}function isLikelyNetworkIssue(r){if(!r)return!1;if(r.code&&NETWORK_ERROR_CODES.has(r.code))return!0;let e=(r.message||"").toLowerCase();return e.includes("network")||e.includes("fetch")||e.includes("timed out")}function runWithChunkTimeout(r,e){let t=getChunkTimeoutMs(),n=()=>{try{return Promise.resolve(r())}catch(s){return Promise.reject(s)}};return t?new Promise((s,i)=>{let o=!1,a=setTimeout(()=>{if(o)return;o=!0;let l=new Error(`Chunk "${e}" load timed out after ${t}ms`);l.code="CHUNK_TIMEOUT",i(l)},t);n().then(l=>{o||(o=!0,clearTimeout(a),s(l))}).catch(l=>{o||(o=!0,clearTimeout(a),i(l))})}):n()}function logResolverFailure(r,e){if(!e)return;let t={chunkName:r,error:e.message,code:e.code,networkIssue:isLikelyNetworkIssue(e),timedOut:e.code==="CHUNK_TIMEOUT"},n=t.networkIssue||t.timedOut?"warn":"error";logFeature(n,"Chunk resolver failed",t)}function tryLoadBuiltChunk(r){if(!r||!resolveNodeDependencies()||typeof nativeFs?.existsSync!="function")return null;if(BUILT_CHUNK_CACHE.has(r))return BUILT_CHUNK_CACHE.get(r);let e=[];typeof __dirname=="string"&&nativePath&&(e.push(nativePath.join(__dirname,"chunks",`${r}.js`)),e.push(nativePath.join(__dirname,"..","dist","chunks",`${r}.js`)));for(let t of e)try{if(!t||!nativeFs.existsSync(t))continue;let n=require(t),s=n?.default||n;return BUILT_CHUNK_CACHE.set(r,s||null),s&&logFeature("info","Loaded chunk via built artifact fallback",{chunkName:r,path:t}),s}catch(n){logFeature("warn","Built chunk fallback failed",{chunkName:r,path:t,error:n.message})}return BUILT_CHUNK_CACHE.set(r,null),null}function tryRequireDevChunk(r){if(isWebRuntime())return null;let e=getDevChunkImportPath(r);if(!e)return null;try{let t=require(e);return t?.default||t}catch(t){(t.code!=="MODULE_NOT_FOUND"||typeof t.message=="string"&&!t.message.includes(e))&&logFeature("debug","Dev chunk require failed",{chunkName:r,importPath:e,error:t.message})}return null}function tryRequireLocalBuiltChunk(r){if(isWebRuntime())return null;let e=`./chunks/${r}`;try{let t=require(e);return t?.default||t}catch(t){t.code==="MODULE_NOT_FOUND"||logFeature("debug","Local chunk require failed",{chunkName:r,importPath:e,error:t.message})}return null}function getSavingsKey(r){return r in CHUNK_SIZES?r:CHUNK_METHOD_ALIASES[r]||null}function announceChunkSavings(r){let e=getSavingsKey(r);if(!e)return;let t=CHUNK_SIZES[e];if(!t)return;let s=`\u{1F4BE} ${e===r||!r?e:`${e} (requested as "${r}")`} chunk unavailable - keeping the feature disabled is saving ~${t}KB`;logFeature("info","Chunk savings applied",{chunkName:e,requestedName:r,savedKB:t})}var getFeatureConfig=()=>{try{let e=require("vscode").workspace.getConfiguration("explorerDates");return{enableOnboarding:e.get("enableOnboardingSystem",!0),enableExportReporting:e.get("enableExportReporting",!0),enableWorkspaceTemplates:e.get("enableWorkspaceTemplates",!0),enableAnalysisCommands:e.get("enableAnalysisCommands",!0),enableAdvancedCache:e.get("enableAdvancedCache",!0),enableWorkspaceIntelligence:e.get("enableWorkspaceIntelligence",!0),enableIncrementalWorkers:e.get("enableIncrementalWorkers",!1),enableExtensionApi:e.get("enableExtensionApi",!0)}}catch{return{enableOnboarding:!0,enableExportReporting:!0,enableWorkspaceTemplates:!0,enableAnalysisCommands:!0,enableAdvancedCache:!0,enableWorkspaceIntelligence:!0,enableIncrementalWorkers:!1,enableExtensionApi:!0}}},featureLoaders=new Map,chunkResolver=null;function setFeatureChunkResolver(r){if(r&&typeof r!="function")throw new Error("Feature chunk resolver must be a function");chunkResolver=r||null}function registerFeatureLoader(r,e){if(typeof e!="function")throw new Error(`Feature loader for "${r}" must be a function`);featureLoaders.set(r,e)}function unregisterFeatureLoader(r){featureLoaders.delete(r)}function clearFeatureLoaders(){featureLoaders.clear()}async function loadFeatureModule(r){let e=featureLoaders.get(r);if(!e&&chunkResolver&&(e=()=>chunkResolver(r)),!e)return logFeature("warn","No loader registered for feature",{feature:r}),null;try{return await runWithChunkTimeout(()=>e(),r)}catch(t){return logFeature("warn","Feature loader failed",{feature:r,error:t.message,code:t.code,networkIssue:isLikelyNetworkIssue(t)}),announceChunkSavings(r),null}}function registerDefaultLoaders(){getAllChunkNames().forEach(e=>{featureLoaders.has(e)||registerFeatureLoader(e,createDefaultLoader(e))})}function createDefaultLoader(r){return async()=>{if(chunkResolver&&typeof chunkResolver=="function")try{let s=await runWithChunkTimeout(()=>chunkResolver(r),r);if(s)return s;logFeature("info","Chunk resolver returned no module",{chunkName:r})}catch(s){logResolverFailure(r,s)}let e=tryRequireDevChunk(r);if(e)return e;let t=tryRequireLocalBuiltChunk(r);if(t)return t;let n=tryLoadBuiltChunk(r);return n||(logFeature("warn","No built artifact available for chunk",{chunkName:r}),null)}}var featureFlags={async onboarding(){return getFeatureConfig().enableOnboarding?loadFeatureModule("onboarding"):(logFeatureDisabled("onboarding","onboarding"),null)},async exportReporting(){return getFeatureConfig().enableExportReporting?loadFeatureModule("reporting"):(logFeatureDisabled("exportReporting","exportReporting"),null)},async workspaceTemplates(){return getFeatureConfig().enableWorkspaceTemplates?loadFeatureModule("templates"):(logFeatureDisabled("workspaceTemplates","workspaceTemplates"),null)},async analysisCommands(){return getFeatureConfig().enableAnalysisCommands?loadFeatureModule("analysis"):(logFeatureDisabled("analysisCommands","analysisCommands"),null)},async advancedCache(){return getFeatureConfig().enableAdvancedCache?loadFeatureModule("advancedCache"):(logFeatureDisabled("advancedCache","advancedCache"),null)},async workspaceIntelligence(){return getFeatureConfig().enableWorkspaceIntelligence?loadFeatureModule("workspaceIntelligence"):(logFeatureDisabled("workspaceIntelligence","workspaceIntelligence"),null)},async incrementalWorkers(){return getFeatureConfig().enableIncrementalWorkers?loadFeatureModule("incrementalWorkers"):(logFeatureDisabled("incrementalWorkers","incrementalWorkers"),null)},async extensionApi(){return getFeatureConfig().enableExtensionApi?loadFeatureModule("extensionApi"):(logFeatureDisabled("extensionApi","extensionApi"),null)},async uiAdapters(){return loadFeatureModule("uiAdapters")},async batchProcessor(){return loadFeatureModule("batchProcessor")},async decorationsAdvanced(){return loadFeatureModule("decorationsAdvanced")},async gitInsights(){return loadFeatureModule("gitInsights")},isEnabled(r){let e=getFeatureConfig();return{onboarding:e.enableOnboarding,exportReporting:e.enableExportReporting,workspaceTemplates:e.enableWorkspaceTemplates,analysisCommands:e.enableAnalysisCommands,advancedCache:e.enableAdvancedCache,workspaceIntelligence:e.enableWorkspaceIntelligence,incrementalWorkers:e.enableIncrementalWorkers,extensionApi:e.enableExtensionApi}[r]??!0},getEnabledFeatures(){let r=getFeatureConfig(),e=[];return r.enableOnboarding&&e.push("onboarding"),r.enableExportReporting&&e.push("exportReporting"),r.enableWorkspaceTemplates&&e.push("workspaceTemplates"),r.enableAnalysisCommands&&e.push("analysisCommands"),r.enableAdvancedCache&&e.push("advancedCache"),r.enableWorkspaceIntelligence&&e.push("workspaceIntelligence"),r.enableIncrementalWorkers&&e.push("incrementalWorkers"),r.enableExtensionApi&&e.push("extensionApi"),e},calculateSavings(){let r=getFeatureConfig(),e=0;return r.enableOnboarding||(e+=34),r.enableExportReporting||(e+=17),r.enableExtensionApi||(e+=15),r.enableWorkspaceTemplates||(e+=14),r.enableWorkspaceIntelligence||(e+=12),r.enableAnalysisCommands||(e+=8),r.enableAdvancedCache||(e+=5),e}};for(let[r,e]of Object.entries(CHUNK_METHOD_ALIASES))!featureFlags[r]&&typeof featureFlags[e]=="function"&&(featureFlags[r]=(...t)=>featureFlags[e](...t));function calculateSavings(r){r||(r=getFeatureConfig());let e=267,t=0;r.enableOnboarding||(t+=34),r.enableExportReporting||(t+=17),r.enableExtensionApi||(t+=15),r.enableWorkspaceTemplates||(t+=14),r.enableWorkspaceIntelligence||(t+=12),r.enableIncrementalWorkers||(t+=19),r.enableAnalysisCommands||(t+=8),r.enableAdvancedCache||(t+=5);let n=e-t,s=t>0?Math.round(t/e*100):0;return{baseSize:`${e}KB`,totalSavings:`${t}KB`,optimizedSize:`${n}KB`,percentage:s}}registerDefaultLoaders();var exportedFeatureFlags={...featureFlags,getFeatureConfig,calculateSavings,registerFeatureLoader,setFeatureChunkResolver,unregisterFeatureLoader,clearFeatureLoaders,loadFeatureModule,registerDefaultLoaders};registerFeatureFlagsGlobal(exportedFeatureFlags);module.exports=exportedFeatureFlags});var ie=p((bt,se)=>{var{getLogger:ze}=F(),{normalizePath:v,getUriPath:W}=C(),{isDateLike:Be,ensureDate:ne}=P(),M=class{constructor(e){this._fileSystem=e,this._logger=ze(),this._batchProcessor=null,this.i=new Map,this.p=null,this.t=null,this.o=!1,this.u=null,this._=new Set,this.g=new Map,this.s=null,this.Y=6e4}initialize(e={}){this._batchProcessor=e.batchProcessor||null,this.o=e.enableProgressiveAnalysis||!1,this.p&&(this.p.dispose(),this.p=null),this.t&&(this.t.dispose(),this.t=null)}async startInitialIndex(e,t={}){if(!this._batchProcessor||!Array.isArray(e)||e.length===0)return;this.T("restart"),this.u=new AbortController;let n=t.maxFiles||2e3;e.forEach(s=>{let i=this._batchProcessor.processDirectoryProgressively(s.uri,async o=>this.I(o,{source:"initial"}),{background:!0,priority:"low",maxFiles:n,cancellationToken:this.u.signal});i&&this._.add(i)}),this._logger.info(`Incremental indexer scheduled initial scan for ${e.length} workspace folder(s).`)}T(e="unspecified"){if(this.u&&!this.u.signal.aborted&&this.u.abort(),this.u=null,this._batchProcessor&&this._.size)for(let t of this._)this._batchProcessor.cancelBatch(t);this._.clear(),e!=="unspecified"&&this._logger.debug(`Incremental indexer cancelled initial scan (${e})`)}async I(e,t={}){try{let n=await this._fileSystem.stat(e);await this.R(e,n,t)}catch(n){this._logger.debug("Incremental indexer failed to stat URI",{error:n?.message,uri:e?.toString?.()})}}async R(e,t,n={}){let s=W(e);if(!s)return;let i=v(s);if(!i)return;let o={path:i,size:t?.size||0,mtimeMs:this.P(t?.mtime),birthtimeMs:this.P(t?.birthtime||t?.ctime||t?.mtime),indexedAt:Date.now(),digest:null,context:n};if(this.o||this.p){let a=this.p||await this.W();if(a?.isEnabled())try{let[l]=await a.runTask("digest",[o]);o.digest=l?.hash||null,o.sizeBucket=l?.sizeBucket,o.ageBucket=l?.ageBucket}catch(l){this._logger.debug("Incremental index worker error",l)}}this.i.set(i,o)}getIndexedStat(e,t=this.Y){if(!e)return null;let n=v(e),s=this.i.get(n);return!s||Date.now()-(s.indexedAt||0)>t?null:{size:s.size||0,mtime:ne(s.mtimeMs||Date.now()),birthtime:ne(s.birthtimeMs||s.mtimeMs||Date.now()),isFile:()=>!0}}queueDelta(e,t="change"){if(!e)return;let n=e.toString();this.g.set(n,{uri:e,eventType:t}),this.s||(this.s=setTimeout(()=>this.J(),300))}async J(){this.s&&(clearTimeout(this.s),this.s=null);let e=Array.from(this.g.values());this.g.clear();for(let{uri:t,eventType:n}of e){if(n==="delete"){let s=v(W(t));s&&this.i.delete(s);continue}await this.I(t,{source:"delta",eventType:n})}}primeFromStat(e,t){!e||!t||this.R(e,t,{source:"prime"}).catch(n=>{this._logger.debug("Failed to prime index from stat",n)})}async W(){if(!this.o)return null;if(!this.t)try{let{loadFeatureModule:e}=re(),t=await e("incrementalWorkers");if(t){let{IncrementalWorkersManager:n}=t;this.t=new n({logger:this._logger}),await this.t.initialize(),this._logger.info("\u{1F4E6} Incremental workers chunk loaded on demand (~8-10KB)")}else return this._logger.warn("Failed to load incremental workers chunk"),null}catch(e){return this._logger.error("Failed to load incremental workers manager",e),null}return this.t.getWorkerHost()}async enableProgressiveAnalysis(){return this.o||(this.o=!0,this._logger.debug("Progressive analysis enabled, workers will be loaded on demand")),this.W()}disableProgressiveAnalysis(){this.o=!1,this.t&&(this.t.dispose(),this.t=null,this._logger.debug("Progressive analysis disabled, worker resources disposed"))}getMetrics(){return{entries:this.i.size,workerEnabled:!!this.t?.isWorkerEnabled(),progressiveAnalysisEnabled:this.o,deltaQueue:this.g.size}}removeFoldersFromIndex(e=[]){if(!Array.isArray(e)||e.length===0)return 0;let t=e.map(s=>v(W(s))).filter(Boolean);if(!t.length)return 0;let n=0;for(let s of Array.from(this.i.keys()))t.some(i=>s===i||s.startsWith(`${i}/`))&&(this.i.delete(s),n++);return n>0&&this._logger.debug(`Incremental indexer pruned ${n} entr${n===1?"y":"ies"} for removed workspace folder(s).`),n}P(e){if(!e)return Date.now();if(typeof e=="number")return e;if(Be(e))return e.getTime();if(typeof e=="string"){let t=Date.parse(e);return Number.isFinite(t)?t:Date.now()}return typeof e.getTime=="function"?e.getTime():Date.now()}dispose(){this.T("dispose"),this.s&&(clearTimeout(this.s),this.s=null),this.g.clear(),this.t&&(this.t.dispose(),this.t=null),this.i.clear()}};se.exports={IncrementalIndexer:M}});var le=p((yt,ae)=>{var oe=require("vscode");function $e(){try{return oe?.env?.uiKind===oe?.UIKind?.Web}catch{return!1}}ae.exports={isWebEnvironment:$e}});var fe=p((Et,ue)=>{var O=class extends Error{constructor(e,t,n={}){super(t),this.code=e,this.context=n,this.name="ExtensionError"}},ce={FILE_PERMISSION_DENIED:"FILE_PERMISSION_DENIED",WORKSPACE_TOO_LARGE:"WORKSPACE_TOO_LARGE",CHUNK_LOAD_FAILED:"CHUNK_LOAD_FAILED"};function Ve(r){if(!r)return!1;let e=r.code||r?.name;return["EACCES","EPERM","EROFS","NoPermissions"].includes(e)}var N=class extends O{constructor(e,t,n={}){let{recoverable:s=!0,context:i={}}=n;super(ce.CHUNK_LOAD_FAILED,`Failed to load ${e}: ${t}`,{chunkName:e,recoverable:s,...i}),this.name="ChunkLoadError",this.chunkName=e,this.recoverable=s}};function je(r,e,t={}){let n=require("vscode"),{userFacing:s=!0}=t,i=e?.recoverable??!0;s&&!i&&n.window.showErrorMessage(`Explorer Dates: ${r} feature unavailable. Please reinstall or rebuild the extension.`)}ue.exports={ExtensionError:O,ERROR_CODES:ce,isPermissionError:Ve,ChunkLoadError:N,handleChunkFailure:je}});var pe=p((wt,he)=>{var u=require("vscode"),{isWebEnvironment:He}=le(),{normalizePath:qe}=C(),{ExtensionError:Ye,ERROR_CODES:Je,isPermissionError:Ze}=fe(),{ensureDate:U}=P(),de=process.env.VSCODE_WEB==="true",Xe=process.env.EXPLORER_DATES_FORCE_VSCODE_FS==="1",f=null;if(!de&&!Xe)try{f=require("fs").promises}catch{f=null}var A=class{constructor(){this.isWeb=de||He()}a(e){if(!e)return"";if(typeof e=="string")return e;if(e&&typeof e=="object"&&typeof e.fsPath=="string")return e.fsPath;if(e&&typeof e=="object"&&typeof e.path=="string")return e.path;if(typeof e=="object"){if(typeof e.fsPath=="string")return e.fsPath;if(typeof e.path=="string")return e.path}return String(e)}l(e){if(e&&typeof e=="object"&&typeof e.scheme=="string"&&typeof e.path=="string")return e;if(typeof e=="string")return u.Uri.file(e);if(e&&typeof e=="object"){if(e.uri&&e.uri!==e)try{return this.l(e.uri)}catch{}if(typeof e.fsPath=="string"&&e.fsPath.length>0)return u.Uri.file(e.fsPath);if(typeof e.path=="string"&&e.path.length>0)return u.Uri.file(e.path);if(typeof e.href=="string"&&e.href.length>0)return u.Uri.parse(e.href);if(typeof e.scheme=="string")return u.Uri.from({scheme:e.scheme,authority:e.authority||"",path:e.path||e.fsPath||"",query:e.query||"",fragment:e.fragment||""});if(typeof e.toString=="function")try{let t=e.toString(!0);if(t&&t!=="[object Object]")return u.Uri.parse(t)}catch{let t=e.toString();if(t&&t!=="[object Object]")return u.Uri.parse(t)}}throw new Error(`Unsupported target type: ${typeof e}`)}async stat(e){if(!this.isWeb&&f)return f.stat(this.a(e));let t=this.l(e),n=await u.workspace.fs.stat(t);return{...n,mtime:U(n.mtime),ctime:U(n.ctime),birthtime:U(n.ctime),isFile:()=>n.type===u.FileType.File,isDirectory:()=>n.type===u.FileType.Directory}}async readFile(e,t="utf8"){if(!this.isWeb&&f)return f.readFile(this.a(e),t);let n=this.l(e),s=await u.workspace.fs.readFile(n);return t===null||t==="binary"?s:new TextDecoder(t).decode(s)}async writeFile(e,t,n="utf8"){let s=this.a(e);try{if(!this.isWeb&&f)return f.writeFile(s,t,n);let i=this.l(e),o=typeof t=="string"?new TextEncoder().encode(t):t;await u.workspace.fs.writeFile(i,o)}catch(i){this.M("write file",s,i)}}async mkdir(e,t={recursive:!0}){let n=this.a(e);try{if(!this.isWeb&&f)return f.mkdir(n,t);let s=this.l(e);await u.workspace.fs.createDirectory(s)}catch(s){this.M("create directory",n,s)}}async readdir(e,t={withFileTypes:!1}){if(!this.isWeb&&f)return f.readdir(this.a(e),t);let n=this.l(e),s=await u.workspace.fs.readDirectory(n);return t.withFileTypes?s.map(([i,o])=>({name:i,isDirectory:()=>o===u.FileType.Directory,isFile:()=>o===u.FileType.File})):s.map(([i])=>i)}async delete(e,t={recursive:!1}){if(!this.isWeb&&f){let s=this.a(e);return t.recursive?f.rm?f.rm(s,t):f.rmdir(s,t):f.unlink(s)}let n=this.l(e);await u.workspace.fs.delete(n,t)}async exists(e){try{return await this.stat(e),!0}catch{return!1}}async ensureDirectory(e){let t=qe(this.a(e));await this.mkdir(t,{recursive:!0})}M(e,t,n){throw Ze(n)?new Ye(Je.FILE_PERMISSION_DENIED,`Permission denied while attempting to ${e}`,{path:t,code:n.code}):n}},Qe=new A;he.exports={FileSystemAdapter:A,fileSystem:Qe}});var Ee=p((kt,ye)=>{var et="__explorerDatesVscode",w=null,T=null,I=!1;function tt(){try{return globalThis[et]}catch{return}}function be(){if(T)return T;let r={get:()=>{},async update(){},inspect:()=>({defaultValue:void 0,globalValue:void 0,workspaceValue:void 0,workspaceFolderValue:void 0})};return T={workspace:{workspaceFolders:[],getConfiguration:()=>r},ConfigurationTarget:{Global:1,Workspace:2,WorkspaceFolder:3}},T}var rt=new Set(["MODULE_NOT_FOUND","ERR_MODULE_NOT_FOUND","WEB_NATIVE_MODULE"]);function nt(r){return!r||r.code&&rt.has(r.code)?!0:(typeof r.message=="string"?r.message:"").includes("Cannot find module 'vscode'")}function D(){let r=tt();if(r)return w=K(r),I=!1,w;if(w&&!I)return w;try{w=K(require("vscode")),I=!1}catch(e){if(nt(e))w=K(be()),I=!0;else throw e}return w}var h=new Proxy({},{get(r,e){return D()[e]},set(r,e,t){return D()[e]=t,!0},has(r,e){return e in D()},ownKeys(){return Reflect.ownKeys(D())},getOwnPropertyDescriptor(r,e){let t=Object.getOwnPropertyDescriptor(D(),e);return t&&(t.configurable=!0),t}}),st="explorerDates",ge="__explorerDatesConfigWrapped";function me(r){return!r||typeof r!="object"?{get:()=>{},async update(){},inspect:()=>({defaultValue:void 0,globalValue:void 0,workspaceValue:void 0,workspaceFolderValue:void 0})}:(typeof r.get!="function"&&(r.get=()=>{}),typeof r.update!="function"&&(r.update=async()=>{}),typeof r.inspect!="function"&&(r.inspect=()=>({defaultValue:void 0,globalValue:void 0,workspaceValue:void 0,workspaceFolderValue:void 0})),r)}function K(r){if(!r)return be();r.ConfigurationTarget||(r.ConfigurationTarget={Global:1,Workspace:2,WorkspaceFolder:3}),r.workspace||(r.workspace={});let e=r.workspace.getConfiguration;if(typeof e=="function"&&!e[ge]){let t=function(...n){let s=e.apply(this,n);return me(s)};t[ge]=!0,r.workspace.getConfiguration=t}else typeof e!="function"&&(r.workspace.getConfiguration=()=>me());return Array.isArray(r.workspace.workspaceFolders)||(r.workspace.workspaceFolders=[]),r}var R=class{constructor(e={}){this.Z=e.defaultSection||st}getValue(e,t={}){let{section:n,resource:s}=t,i=this.F(e,n);return this.D(i.section,s).get(i.key)}inspect(e,t={}){let{section:n,resource:s}=t,i=this.F(e,n);return this.D(i.section,s).inspect(i.key)}async updateSetting(e,t,n={}){let{scope:s="auto",resource:i,section:o,force:a=!1}=n,l=this.F(e,o),d=this.D(l.section,i),m=this.X(s,i),L=d.get(l.key),k=d.inspect(l.key),_=this.Q(k,m);return t!==void 0&&this.ee(L,t)&&!a&&_!==void 0?{key:l.fullKey,updated:!1,reason:"unchanged"}:(await d.update(l.key,t,m),{key:l.fullKey,updated:!0})}async applySettings(e,t={}){let n=Array.isArray(e)?e:Object.entries(e).map(([i,o])=>({key:i,value:o})),s=[];for(let i of n){let o={...t,...i.options||{}};s.push(await this.updateSetting(i.key,i.value,o))}return s}async clearSetting(e,t={}){return this.updateSetting(e,void 0,t)}D(e,t){return h.workspace.getConfiguration(e||void 0,t)}F(e,t){let n=t||this.Z;if(!n)return{section:void 0,key:e,fullKey:e};if(e.startsWith(`${n}.`)){let s=e.slice(n.length+1);return{section:n,key:s,fullKey:e}}return e.includes(".")?{section:void 0,key:e,fullKey:e}:{section:n,key:e,fullKey:`${n}.${e}`}}X(e,t){return e&&e!=="auto"?this.te(e)||h.ConfigurationTarget.Workspace:t?h.ConfigurationTarget.WorkspaceFolder:h.workspace.workspaceFolders&&h.workspace.workspaceFolders.length>0?h.ConfigurationTarget.Workspace:h.ConfigurationTarget.Global}te(e){switch(e){case"user":return h.ConfigurationTarget.Global;case"workspace":return h.ConfigurationTarget.Workspace;case"workspaceFolder":return h.ConfigurationTarget.WorkspaceFolder;default:return}}de(e){switch(e){case h.ConfigurationTarget.Global:return"user";case h.ConfigurationTarget.Workspace:return"workspace";case h.ConfigurationTarget.WorkspaceFolder:return"workspaceFolder";default:return"unknown"}}ee(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="object")try{return JSON.stringify(e)===JSON.stringify(t)}catch{return!1}return!1}Q(e,t){if(e)switch(t){case h.ConfigurationTarget.Global:return e.globalValue;case h.ConfigurationTarget.Workspace:return e.workspaceValue;case h.ConfigurationTarget.WorkspaceFolder:return e.workspaceFolderValue;default:return}}},G=null;function it(r){return(!G||r&&r.forceNew)&&(G=new R(r)),G}ye.exports={SettingsCoordinator:R,getSettingsCoordinator:it}});var ke=p((_t,we)=>{var g=require("vscode"),{getLogger:ot}=F(),{fileSystem:at}=pe(),{normalizePath:z,getRelativePath:lt,getFileName:ct}=C(),{getSettingsCoordinator:ut}=Ee(),B=class{constructor(){this._logger=ot(),this.c=at,this.C=ut(),this.re=["node_modules",".npm",".yarn","coverage","nyc_output","dist","build","out","target","bin","obj",".vscode",".idea",".vs",".vscode-test",".git",".svn",".hg",".bzr",".pnpm-store","bower_components","jspm_packages","tmp","temp",".tmp",".cache",".parcel-cache",".DS_Store","Thumbs.db","__pycache__",".pytest_cache",".tox","venv",".env",".virtualenv","vendor",".docker","logs","*.log"],this.he=new Map,this.ne=new Map,this.se="explorer-dates-exclusions.json",this.S="workspaceExclusionProfiles",this._logger.info("SmartExclusionManager initialized")}async cleanupAllWorkspaceProfiles(){let e=g.workspace.workspaceFolders||[];if(e.length===0){this._logger.debug("No workspace folders available for exclusion cleanup");return}let t=0;for(let n of e)try{let s=n.uri;await this.N(n.uri,s)&&t++}catch(s){this._logger.warn(`Failed to migrate exclusions for ${n.name}`,s)}t>0?this._logger.info("Migrated workspace exclusion profiles to workspace storage",{workspaces:t}):this._logger.debug("No legacy workspace exclusion profiles required migration")}async analyzeWorkspace(e){try{let t=z(e?.fsPath||e?.path||""),n={detectedPatterns:[],suggestedExclusions:[],projectType:"unknown",riskFolders:[]};n.projectType=await this.ie(e);let s=await this.oe(e,t),i=this.ae(s,n.projectType);return n.detectedPatterns=s,n.suggestedExclusions=i.filter(o=>o.score>.7).map(o=>o.pattern),n.riskFolders=i.filter(o=>o.riskLevel==="high").map(o=>o.pattern),this.ne.set(t,n),this._logger.info(`Workspace analysis complete for ${t}`,n),n}catch(t){return this._logger.error("Failed to analyze workspace",t),null}}async ie(e){let t=[{file:"package.json",type:"javascript"},{file:"pom.xml",type:"java"},{file:"Cargo.toml",type:"rust"},{file:"setup.py",type:"python"},{file:"requirements.txt",type:"python"},{file:"Gemfile",type:"ruby"},{file:"composer.json",type:"php"},{file:"go.mod",type:"go"},{file:"CMakeLists.txt",type:"cpp"},{file:"Dockerfile",type:"docker"}];if(!e)return"unknown";for(let n of t)try{let s=g.Uri.joinPath(e,n.file);if(await this.c.exists(s))return n.type}catch{}return"unknown"}async oe(e,t,n=2){let s=[],i=async(o,a=0)=>{if(!(a>n))try{let l=await this.c.readdir(o,{withFileTypes:!0});for(let d of l)if(d.isDirectory()){let m=g.Uri.joinPath(o,d.name),L=z(m.fsPath||m.path),k=lt(t,L);this.re.includes(d.name)&&s.push({name:d.name,path:k,type:"common",size:await this.U(m)});let _=await this.U(m);_>10485760&&s.push({name:d.name,path:k,type:"large",size:_}),await i(m,a+1)}}catch{}};return await i(e),s}async U(e){try{let t=await this.c.readdir(e,{withFileTypes:!0}),n=0,s=0;for(let i of t){if(s>100)break;if(i.isFile())try{let o=g.Uri.joinPath(e,i.name),a=await this.c.stat(o);n+=a.size,s++}catch{}}return n}catch{return 0}}ae(e,t){return e.map(n=>{let s=0,i="low";switch(n.type==="common"&&(s+=.8),n.size>100*1024*1024?(s+=.9,i="high"):n.size>10*1024*1024&&(s+=.5,i="medium"),t){case"javascript":["node_modules",".npm","coverage","dist","build"].includes(n.name)&&(s+=.9);break;case"python":["__pycache__",".pytest_cache","venv",".env"].includes(n.name)&&(s+=.9);break;case"java":["target","build",".gradle"].includes(n.name)&&(s+=.9);break}return["src","lib","app","components","pages"].includes(n.name.toLowerCase())&&(s=0,i="none"),{pattern:n.name,path:n.path,score:Math.min(s,1),riskLevel:i,size:n.size,type:n.type}})}async getWorkspaceExclusions(e){let t=this.K(e);if(!t)return this._logger.debug("No workspace root for exclusions lookup"),[];let n=await this.G(t);return n||await this.N(e,t)||[]}async saveWorkspaceExclusions(e,t){let n=this.K(e);if(!n){this._logger.warn("Cannot save workspace exclusions without a workspace root");return}let s=this.f(t),i=await this.G(n);if(i&&this.le(i,s)){this._logger.debug("Workspace exclusions already up to date",{workspace:this.m(e)});return}await this.z(n,s),await this.B(e),this._logger.info(`Saved workspace exclusions for ${this.m(e)}`,s)}async getCombinedExclusions(e){let t=g.workspace.getConfiguration("explorerDates"),n=t.get("excludedFolders",[]),s=t.get("excludedPatterns",[]),i=t.get("smartExclusions",!0),o=[...n],a=[...s],l=await this.getWorkspaceExclusions(e);if(o.push(...l),i){let d=await this.analyzeWorkspace(e);d&&o.push(...d.suggestedExclusions)}return o=[...new Set(o)],a=[...new Set(a)],{folders:o,patterns:a}}m(e){if(!e)return"unknown-workspace";let t=e.fsPath||e.path||"";return ct(t)||z(t)}async suggestExclusions(e){let t=await this.analyzeWorkspace(e),n=this.f(t?.suggestedExclusions||[]);if(!t||n.length===0)return;let s=await this.getWorkspaceExclusions(e),i=n.filter(d=>!s.includes(d));if(i.length===0){this._logger.debug("No new smart exclusions detected",{workspace:this.m(e)});return}let o=this.ce(s,i);await this.saveWorkspaceExclusions(e,o);let a=i.length===1?`Explorer Dates automatically excluded "${i[0]}" to keep Explorer responsive.`:`Explorer Dates automatically excluded ${i.length} folders to keep Explorer responsive.`,l=await g.window.showInformationMessage(`${a} Keep these exclusions?`,"Keep","Review","Revert");l==="Revert"?(await this.saveWorkspaceExclusions(e,s),g.window.showInformationMessage("Smart exclusions reverted. Decorations will refresh for the restored folders."),this._logger.info("User reverted smart exclusions",{reverted:i})):l==="Review"?(this.ue(t),this._logger.info("User reviewing smart exclusions",{pending:i})):this._logger.info("User kept smart exclusions",{accepted:i})}K(e){return e||(g.workspace.workspaceFolders?.[0]?.uri??null)}$(e){return e?g.Uri.joinPath(e,".vscode"):null}V(e){let t=this.$(e);return t?g.Uri.joinPath(t,this.se):null}async G(e){let t=this.V(e);if(!t)return null;try{let n=await this.c.readFile(t,"utf8"),s=JSON.parse(n);return Array.isArray(s)?this.f(s):Array.isArray(s?.exclusions)?this.f(s.exclusions):null}catch(n){return n?.code==="ENOENT"||n?.name==="EntryNotFound"||n?.message?.includes("ENOENT")||this._logger.warn("Failed to read workspace exclusions file",{error:n.message}),null}}async z(e,t){let n=this.V(e);if(!n)return;let s=this.$(e);s&&await this.c.ensureDirectory(s);let i={version:1,updatedAt:new Date().toISOString(),exclusions:t};await this.c.writeFile(n,JSON.stringify(i,null,2))}async N(e,t){let n=this.m(e),s=this.C.getValue(this.S)||{},i=Array.isArray(s[n])?this.f(s[n]):[];return i.length?(t&&(await this.z(t,i),await this.B(e),this._logger.info(`Migrated workspace exclusions for ${n} to workspace settings file`)),i):null}async B(e){let t=this.m(e),n=this.C.getValue(this.S)||{};t in n&&(delete n[t],await this.C.updateSetting(this.S,n,{scope:"user",reason:"workspace-exclusion-migration"}))}f(e=[]){return Array.from(new Set(e.filter(Boolean)))}ce(e=[],t=[]){return this.f([...e||[],...t||[]])}le(e=[],t=[]){return e.length!==t.length?!1:e.every((n,s)=>n===t[s])}ue(e){let t=g.window.createWebviewPanel("exclusionReview","Smart Exclusion Review",g.ViewColumn.One,{enableScripts:!0});t.webview.html=this.fe(e)}fe(e){let t=s=>{if(s<1024)return`${s} B`;let i=s/1024;return i<1024?`${i.toFixed(1)} KB`:`${(i/1024).toFixed(1)} MB`},n=e.detectedPatterns.map(s=>`
            <tr>
                <td>${s.name}</td>
                <td>${s.path}</td>
                <td>${t(s.size)}</td>
                <td>${s.type}</td>
                <td>
                    <input type="checkbox" ${e.suggestedExclusions.includes(s.name)?"checked":""}>
                </td>
            </tr>
        `).join("");return`
            <!DOCTYPE html>
            <html>
            <head>
                <meta charset="UTF-8">
                <title>Smart Exclusion Review</title>
                <style>
                    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; padding: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { padding: 8px 12px; text-align: left; border-bottom: 1px solid #333; }
                    th { background-color: var(--vscode-editor-background); font-weight: bold; }
                    .project-info { background: var(--vscode-editor-background); padding: 15px; border-radius: 4px; margin-bottom: 20px; }
                </style>
            </head>
            <body>
                <h1>\u{1F9E0} Smart Exclusion Review</h1>
                <div class="project-info">
                    <strong>Project Type:</strong> ${e.projectType}<br>
                    <strong>Detected Patterns:</strong> ${e.detectedPatterns.length}<br>
                    <strong>Suggested Exclusions:</strong> ${e.suggestedExclusions.length}
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Folder</th>
                            <th>Path</th>
                            <th>Size</th>
                            <th>Type</th>
                            <th>Exclude</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${n}
                    </tbody>
                </table>
            </body>
            </html>
        `}};we.exports={SmartExclusionManager:B}});var{IncrementalIndexer:_e}=ie(),{SmartExclusionManager:xe}=ke(),{getLogger:ft}=F(),$=class{constructor(e){this._fileSystem=e,this._logger=ft(),this.r=null,this.e=null,this.b=!1}async initialize(e={}){if(this.b)return;let{batchProcessor:t,enableProgressiveAnalysis:n}=e,s=!!t?.processDirectoryProgressively;this.r||(this.r=new _e(this._fileSystem)),this.r.initialize({batchProcessor:s?t:null,enableProgressiveAnalysis:n}),t&&!s&&this._logger.warn("BatchProcessor missing progressive API; workspace indexing disabled"),this.e||(this.e=new xe),this.b=!0,this._logger.info("Workspace intelligence components initialized")}async analyzeWorkspace(e,t={}){if(!(!this.b||!e?.length))try{if(this.r?.startInitialIndex&&(await this.r.startInitialIndex(e,{maxFiles:t.maxFiles||2e3}),this._logger.info("Workspace indexing started")),this.e)for(let n of e)try{await this.e.suggestExclusions(n.uri),this._logger.info(`Smart exclusions analyzed for: ${n.name}`)}catch(s){this._logger.error(`Failed to analyze smart exclusions for ${n.name}`,s)}}catch(n){this._logger.error("Failed to analyze workspace",n)}}async cleanupWorkspaceProfiles(){if(this.e)try{await this.e.cleanupAllWorkspaceProfiles()}catch(e){this._logger.warn("Failed to clean workspace exclusion profiles",e)}}async enableProgressiveAnalysis(){return this.r?this.r.enableProgressiveAnalysis():null}disableProgressiveAnalysis(){this.r&&this.r.disableProgressiveAnalysis()}getMetrics(){let e={};return this.r?.getMetrics&&(e.incrementalIndexer=this.r.getMetrics()),this.e?.getMetrics&&(e.smartExclusion=this.e.getMetrics()),e}async onWorkspaceFoldersChanged(e){if(this.b&&(e.added?.length&&await this.analyzeWorkspace(e.added),e.removed?.length&&this.e))for(let t of e.removed)try{await this.e.removeWorkspaceProfile(t.uri)}catch(n){this._logger.warn(`Failed to remove workspace profile for ${t.name}`,n)}}shouldExclude(e){return this.e?this.e.shouldExclude(e):!1}getExclusionPatterns(e){return this.e?this.e.getExclusionPatterns(e):[]}dispose(){this.r?.dispose&&this.r.dispose(),this.e?.dispose&&this.e.dispose(),this.b=!1,this._logger.debug("Workspace intelligence components disposed")}get incrementalIndexer(){return this.r}get smartExclusion(){return this.e}};module.exports={WorkspaceIntelligenceManager:$,IncrementalIndexer:_e,SmartExclusionManager:xe};
})(); (function(){const primaryKey="explorerDatesChunks";const legacyKey="__explorerDatesChunks";const registry=(globalThis[primaryKey]=globalThis[primaryKey]||globalThis[legacyKey]||(globalThis[legacyKey]={}));registry["workspaceIntelligence"]=module.exports;})();
